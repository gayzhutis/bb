<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      'b8281cf27e4f644d1c5978b709adc229' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"mse2-row\\">\\n\\t[[+idx]]. <a href=\\"[[+uri]]\\" class=\\"search-link\\">[[+pagetitle]]<\\/a>[[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight  ([[%mse2_weight]]: [[+weight]])-->\\n<!--msearch2_intro <p>[[+intro]]<\\/p>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.row.tpl","content":"<div class=\\"mse2-row\\">\\n\\t[[+idx]]. <a href=\\"[[+uri]]\\" class=\\"search-link\\">[[+pagetitle]]<\\/a>[[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight  ([[%mse2_weight]]: [[+weight]])-->\\n<!--msearch2_intro <p>[[+intro]]<\\/p>-->"}',
        'guid' => '724b4e0259b9453c124e95b230af01dc',
        'native_key' => 0,
        'signature' => '087557714ba683007bb4795da8195de1',
      ),
      'ac12ccde2bcaf3235e0cb935e72f0589' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.form","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<form action=\\"[[~[[+pageId]]]]\\" method=\\"get\\" class=\\"well msearch2\\" id=\\"mse2_form\\">\\n\\t<div class=\\"row\\">\\n\\t\\t<div class=\\"form-group col-md-10\\">\\n\\t\\t\\t<input type=\\"text\\" class=\\"form-control\\" name=\\"[[+queryVar]]\\" placeholder=\\"[[%mse2_search]]\\" value=\\"[[+mse2_query]]\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-search\\"><\\/i> [[%search]]\\n\\t\\t<\\/button>\\n\\t<\\/div>\\n<\\/form>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.form.tpl","content":"<form action=\\"[[~[[+pageId]]]]\\" method=\\"get\\" class=\\"well msearch2\\" id=\\"mse2_form\\">\\n\\t<div class=\\"row\\">\\n\\t\\t<div class=\\"form-group col-md-10\\">\\n\\t\\t\\t<input type=\\"text\\" class=\\"form-control\\" name=\\"[[+queryVar]]\\" placeholder=\\"[[%mse2_search]]\\" value=\\"[[+mse2_query]]\\" \\/>\\n\\t\\t<\\/div>\\n\\t\\t<button type=\\"submit\\" class=\\"btn btn-default\\">\\n\\t\\t\\t<i class=\\"glyphicon glyphicon-search\\"><\\/i> [[%search]]\\n\\t\\t<\\/button>\\n\\t<\\/div>\\n<\\/form>"}',
        'guid' => '37de9485e02a4c2f0b7f10ccb74c3e6a',
        'native_key' => 0,
        'signature' => '9c1dff30d854a7d7f896d7609276117d',
      ),
      'cccc73564f2607f7a2923565a0053d1b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mSearch2.ac","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"mse2-ac-item\\">\\n\\t[[+idx]]. [[+pagetitle]] [[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight <span class=\\"mse2-ac-weight\\"><small>[[%mse2_weight]]: [[+weight]]<\\/small><\\/span>-->\\n<!--msearch2_intro <br\\/><small>[[+intro]]<\\/small>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.msearch2.ac.tpl","content":"<div class=\\"mse2-ac-item\\">\\n\\t[[+idx]]. [[+pagetitle]] [[+weight]]\\n\\t[[+intro]]\\n<\\/div>\\n<!--msearch2_weight <span class=\\"mse2-ac-weight\\"><small>[[%mse2_weight]]: [[+weight]]<\\/small><\\/span>-->\\n<!--msearch2_intro <br\\/><small>[[+intro]]<\\/small>-->"}',
        'guid' => 'e4915b4dcfbeb1436c30a1e4d0896653',
        'native_key' => 0,
        'signature' => 'bc7981df0639ad0ff16db33353737595',
      ),
      '98cb4c5ae00e8579cb700f6708757a94' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"row msearch2\\" id=\\"mse2_mfilter\\">\\n\\t<div class=\\"span3 col-md-3\\">\\n\\t\\t<form action=\\"\\" method=\\"post\\" id=\\"mse2_filters\\">\\n\\t\\t\\t[[+filters]]\\n\\t\\t<\\/form>\\n\\n\\t\\t<br\\/>\\n\\t\\t<div>[[%mse2_limit]]\\n\\t\\t\\t<select name=\\"mse_limit\\" id=\\"mse2_limit\\">\\n\\t\\t\\t\\t<option value=\\"10\\" [[+limit:is=`10`:then=`selected`]]>10<\\/option>\\n\\t\\t\\t\\t<option value=\\"25\\" [[+limit:is=`25`:then=`selected`]]>25<\\/option>\\n\\t\\t\\t\\t<option value=\\"50\\" [[+limit:is=`50`:then=`selected`]]>50<\\/option>\\n\\t\\t\\t\\t<option value=\\"100\\" [[+limit:is=`100`:then=`selected`]]>100<\\/option>\\n\\t\\t\\t<\\/select>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<div class=\\"span9 col-md-9\\">\\n\\t\\t<h3>[[%mse2_filter_total]] <span id=\\"mse2_total\\">[[+total:default=`0`]]<\\/span><\\/h3>\\n\\n\\t\\t<div class=\\"row\\">\\n\\t\\t\\t<div id=\\"mse2_sort\\" class=\\"span5 col-md-5\\">\\n\\t\\t\\t\\t[[%mse2_sort]]\\n\\t\\t\\t\\t<a href=\\"#\\" data-sort=\\"resource|publishedon\\" data-dir=\\"[[+mse2_sort:is=`resource|publishedon:desc`:then=`desc`]]\\" data-default=\\"desc\\" class=\\"sort\\">[[%mse2_sort_publishedon]] <span><\\/span><\\/a>\\n\\t\\t\\t<\\/div>\\n\\n\\t\\t\\t[[+tpls:notempty=`\\n\\t\\t\\t<div id=\\"mse2_tpl\\" class=\\"span4 col-md-4\\">\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"0\\" class=\\"[[+tpl0]]\\">[[%mse2_chunk_default]]<\\/a> \\/\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"1\\" class=\\"[[+tpl1]]\\">[[%mse2_chunk_alternate]]<\\/a>\\n\\t\\t\\t<\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_selected_wrapper\\">\\n\\t\\t\\t<div id=\\"mse2_selected\\">[[%mse2_selected]]:\\n\\t\\t\\t\\t<span><\\/span>\\n\\t\\t\\t<\\/div>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_results\\">\\n\\t\\t\\t[[+results]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"pagination\\">\\n\\t\\t\\t<ul id=\\"mse2_pagination\\">\\n\\t\\t\\t\\t[[!+page.nav]]\\n\\t\\t\\t<\\/ul>\\n\\t\\t<\\/div>\\n\\n\\t<\\/div>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.outer.tpl","content":"<div class=\\"row msearch2\\" id=\\"mse2_mfilter\\">\\n\\t<div class=\\"span3 col-md-3\\">\\n\\t\\t<form action=\\"\\" method=\\"post\\" id=\\"mse2_filters\\">\\n\\t\\t\\t[[+filters]]\\n\\t\\t<\\/form>\\n\\n\\t\\t<br\\/>\\n\\t\\t<div>[[%mse2_limit]]\\n\\t\\t\\t<select name=\\"mse_limit\\" id=\\"mse2_limit\\">\\n\\t\\t\\t\\t<option value=\\"10\\" [[+limit:is=`10`:then=`selected`]]>10<\\/option>\\n\\t\\t\\t\\t<option value=\\"25\\" [[+limit:is=`25`:then=`selected`]]>25<\\/option>\\n\\t\\t\\t\\t<option value=\\"50\\" [[+limit:is=`50`:then=`selected`]]>50<\\/option>\\n\\t\\t\\t\\t<option value=\\"100\\" [[+limit:is=`100`:then=`selected`]]>100<\\/option>\\n\\t\\t\\t<\\/select>\\n\\t\\t<\\/div>\\n\\t<\\/div>\\n\\n\\t<div class=\\"span9 col-md-9\\">\\n\\t\\t<h3>[[%mse2_filter_total]] <span id=\\"mse2_total\\">[[+total:default=`0`]]<\\/span><\\/h3>\\n\\n\\t\\t<div class=\\"row\\">\\n\\t\\t\\t<div id=\\"mse2_sort\\" class=\\"span5 col-md-5\\">\\n\\t\\t\\t\\t[[%mse2_sort]]\\n\\t\\t\\t\\t<a href=\\"#\\" data-sort=\\"resource|publishedon\\" data-dir=\\"[[+mse2_sort:is=`resource|publishedon:desc`:then=`desc`]]\\" data-default=\\"desc\\" class=\\"sort\\">[[%mse2_sort_publishedon]] <span><\\/span><\\/a>\\n\\t\\t\\t<\\/div>\\n\\n\\t\\t\\t[[+tpls:notempty=`\\n\\t\\t\\t<div id=\\"mse2_tpl\\" class=\\"span4 col-md-4\\">\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"0\\" class=\\"[[+tpl0]]\\">[[%mse2_chunk_default]]<\\/a> \\/\\n\\t\\t\\t\\t<a href=\\"#\\" data-tpl=\\"1\\" class=\\"[[+tpl1]]\\">[[%mse2_chunk_alternate]]<\\/a>\\n\\t\\t\\t<\\/div>\\n\\t\\t\\t`]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_selected_wrapper\\">\\n\\t\\t\\t<div id=\\"mse2_selected\\">[[%mse2_selected]]:\\n\\t\\t\\t\\t<span><\\/span>\\n\\t\\t\\t<\\/div>\\n\\t\\t<\\/div>\\n\\n\\t\\t<div id=\\"mse2_results\\">\\n\\t\\t\\t[[+results]]\\n\\t\\t<\\/div>\\n\\n\\t\\t<div class=\\"pagination\\">\\n\\t\\t\\t<ul id=\\"mse2_pagination\\">\\n\\t\\t\\t\\t[[!+page.nav]]\\n\\t\\t\\t<\\/ul>\\n\\t\\t<\\/div>\\n\\n\\t<\\/div>\\n<\\/div>"}',
        'guid' => 'b98526d91dc3d05b5a635b4601090442',
        'native_key' => 0,
        'signature' => 'b66bd02dc75870658c80b7e333ad638a',
      ),
      'c2ff0ad9386c9233ab4c51d1aeb291b3' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.outer","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t[[+rows]]\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.outer.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t[[+rows]]\\n<\\/fieldset>"}',
        'guid' => '6cbb09808292b673dc2cac23a6e25c3b',
        'native_key' => 0,
        'signature' => '835dd5644bae5fa9c32cbc8019e828a6',
      ),
      '09dca6f52e56479db1d7d7de123a4a69' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.slider","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<div class=\\"mse2_number_slider\\"><\\/div>\\n\\t<div class=\\"mse2_number_inputs\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.slider.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<div class=\\"mse2_number_slider\\"><\\/div>\\n\\t<div class=\\"mse2_number_inputs\\">\\n\\t\\t[[+rows]]\\n\\t<\\/div>\\n<\\/fieldset>"}',
        'guid' => 'fc6957dec0f4f5ace2a4db33c6e7b187',
        'native_key' => 0,
        'signature' => '22f44535914703ba15fb85cb71cb6021',
      ),
      'e7b8d4b8de9a91c6da9a5025de0f15c5' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.select","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<select name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"[[+table]][[+delimeter]][[+filter]]_0\\">\\n\\t\\t<option value=\\"\\" selected>[[%mse2_select]]<\\/option>\\n\\t\\t[[+rows]]\\n\\t<\\/select>\\n<\\/fieldset>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.select.tpl","content":"<fieldset id=\\"mse2_[[+table]][[+delimeter]][[+filter]]\\">\\n\\t<h4>[[%mse2_filter_[[+table]]_[[+filter]]]]<\\/h4>\\n\\t<select name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"[[+table]][[+delimeter]][[+filter]]_0\\">\\n\\t\\t<option value=\\"\\" selected>[[%mse2_select]]<\\/option>\\n\\t\\t[[+rows]]\\n\\t<\\/select>\\n<\\/fieldset>"}',
        'guid' => '1e54c1f60a0a9fbdc9ca57771ae46727',
        'native_key' => 0,
        'signature' => '543032441bbf962503fdebf8079e8904',
      ),
      '971a9dc688bf911bbf123520add7a353' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.checkbox","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"checkbox\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.checkbox.tpl","content":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"checkbox\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>"}',
        'guid' => 'b8d552189b9c7fa4478f237783cb4c9b',
        'native_key' => 0,
        'signature' => 'db89872f858d4fc44231ae8de6ba3c26',
      ),
      '37baa78649ef955abda993658d4eb697' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.number","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"form-group col-md-6\\">\\n\\t<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\">[[+title]]\\n\\t\\t<input type=\\"input\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" class=\\"form-control input-sm\\" \\/>\\n\\t<\\/label>\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.number.tpl","content":"<div class=\\"form-group col-md-6\\">\\n\\t<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\">[[+title]]\\n\\t\\t<input type=\\"input\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" class=\\"form-control input-sm\\" \\/>\\n\\t<\\/label>\\n<\\/div>"}',
        'guid' => 'daa322ed4e7b5c1b258c429fbe3ea159',
        'native_key' => 0,
        'signature' => '0d8a24d245793636c0f335c0672beee9',
      ),
      'b93bd80a2076032d26cc51f4b492e49b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.radio","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"radio\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.radio.tpl","content":"<label for=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" class=\\"[[+disabled]]\\">\\n\\t<input type=\\"radio\\" name=\\"[[+table]][[+delimeter]][[+filter]]\\" id=\\"mse2_[[+table]][[+delimeter]][[+filter]]_[[+idx]]\\" value=\\"[[+value]]\\" [[+checked]] [[+disabled]]\\/> [[+title]] <sup>[[+num]]<\\/sup>\\n<\\/label><br\\/>"}',
        'guid' => 'f07f6fbb91623583a9cc31bd2bc0c381',
        'native_key' => 0,
        'signature' => '32ce6ad6c18e46da1a7adfad4b798365',
      ),
      'a8b93bcad04e10389bc856913f73309b' => 
      array (
        'preserve_keys' => false,
        'update_object' => false,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.mFilter2.filter.option","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<option value=\\"[[+value]]\\" [[+selected]] [[+disabled]] class=\\"[[+disabled]]\\">[[+title]]&nbsp;[[+num]]<\\/option>\\n\\n<!--pdotools_num ([[+num]])-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/chunks\\/chunk.mfilter2.filter.option.tpl","content":"<option value=\\"[[+value]]\\" [[+selected]] [[+disabled]] class=\\"[[+disabled]]\\">[[+title]]&nbsp;[[+num]]<\\/option>\\n\\n<!--pdotools_num ([[+num]])-->"}',
        'guid' => '7dfc6172894e4dab68da04c970965b9d',
        'native_key' => 0,
        'signature' => 'a915826d970dfe320aa26226930674b0',
      ),
    ),
    'Snippets' => 
    array (
      'af5b90814c519199e357e69cd8ef2bf1' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mSearch2","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties, $pdoFetch);\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($htagOpen)) {$htagOpen = \'<b>\';}\\nif (empty($htagClose)) {$htagClose = \'<\\/b>\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\n$returnIds = !empty($returnIds);\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$found = array();\\n$output = null;\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? htmlspecialchars(strip_tags(trim($_REQUEST[$queryVar])))\\n\\t: \'\';\\n\\nif (empty($resources)) {\\n\\tif (empty($query) && isset($_REQUEST[$queryVar])) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query\');\\n\\t}\\n\\telseif (empty($query) && !empty($forceSearch)) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query_var\');\\n\\t}\\n\\telseif (!empty($query) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_min_query\');\\n\\t}\\n\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\tif (!empty($output)) {\\n\\t\\treturn !$returnIds\\n\\t\\t\\t? $output\\n\\t\\t\\t: \'\';\\n\\t}\\n\\telseif (!empty($query)) {\\n\\t\\t$found = $mSearch2->Search($query);\\n\\t\\t$ids = array_keys($found);\\n\\t\\t$resources = implode(\',\', $ids);\\n\\t\\tif (empty($found)) {\\n\\t\\t\\tif ($returnIds) {\\n\\t\\t\\t\\treturn \'\';\\n\\t\\t\\t}\\n\\t\\t\\telseif (!empty($query)) {\\n\\t\\t\\t\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($tplWrapper) && !empty($wrapIfEmpty)) {\\n\\t\\t\\t\\t$output = $pdoFetch->getChunk(\\n\\t\\t\\t\\t\\t$tplWrapper,\\n\\t\\t\\t\\t\\tarray(\\n\\t\\t\\t\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\\t\\t\\t\'total\' => 0,\\n\\t\\t\\t\\t\\t\\t\'query\' => $query,\\n\\t\\t\\t\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t$fastMode\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t\\t\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\treturn $output;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\nelseif (strpos($resources, \'{\') === 0) {\\n\\t$found = $modx->fromJSON($resources);\\n\\t$resources = implode(\',\', array_keys($found));\\n\\tunset($scriptProperties[\'resources\']);\\n}\\n\\/*----------------------------------------------------------------------------------*\\/\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'mseIntro\' => array(\\n\\t\\t\'class\' => \'mseIntro\',\\n\\t\\t\'alias\' => \'Intro\',\\n\\t\\t\'on\' => \'`modResource`.`id`=`Intro`.`resource`\'\\n\\t)\\n);\\n\\/\\/ Fields to select\\n$resourceColumns = !empty($includeContent)\\n\\t? $modx->getSelectColumns($class, $class)\\n\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true);\\n$select = array(\\n\\t$class => $resourceColumns,\\n\\t\'Intro\' => \'intro\'\\n);\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'leftJoin\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\\/\\/,\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'fastMode\' => $fastMode,\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t\\t? \'ids\'\\n\\t\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'msearch2_\',\\n);\\nif (!empty($resources)) {\\n\\t$default[\'resources\'] = is_array($resources)\\n\\t\\t? implode(\',\', $resources)\\n\\t\\t: $resources;\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing results\\nif ($returnIds) {\\n\\treturn $rows;\\n}\\nelseif (!empty($rows) && is_array($rows)) {\\n\\t$output = array();\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'weight\'] = isset($found[$row[\'id\']]) ? $found[$row[\'id\']] : \'\';\\n\\t\\t$row[\'intro\'] = $mSearch2->Highlight($row[\'intro\'], $query, $htagOpen, $htagClose);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t$tplRow = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] .= empty($tplRow)\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $row)\\n\\t\\t\\t: $pdoFetch->getChunk($tplRow, $row, $fastMode);\\n\\t}\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n\\tif (!empty($output)) {\\n\\t\\t$output = implode($outputSeparator, $output);\\n\\t}\\n}\\nelse {\\n\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t$output = $pdoFetch->getChunk(\\n\\t\\t$tplWrapper,\\n\\t\\tarray(\\n\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\n\\t\\t\\t\'query\' => $modx->getPlaceholder($plPrefix.$queryVar),\\n\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t),\\n\\t\\t$fastMode\\n\\t);\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}","locked":0,"properties":"a:29:{s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:13:\\"mse2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:16:\\"tpl.mSearch2.row\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"returnIds\\";a:7:{s:4:\\"name\\";s:9:\\"returnIds\\";s:4:\\"desc\\";s:19:\\"mse2_prop_returnIds\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:17:\\"mse2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:18:\\"mse2_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:15:\\"mse2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"offset\\";a:7:{s:4:\\"name\\";s:6:\\"offset\\";s:4:\\"desc\\";s:16:\\"mse2_prop_offset\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:15:\\"mse2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:25:\\"mse2_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:23:\\"mse2_prop_toPlaceholder\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:17:\\"mse2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"includeTVs\\";a:7:{s:4:\\"name\\";s:10:\\"includeTVs\\";s:4:\\"desc\\";s:20:\\"mse2_prop_includeTVs\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tvPrefix\\";a:7:{s:4:\\"name\\";s:8:\\"tvPrefix\\";s:4:\\"desc\\";s:18:\\"mse2_prop_tvPrefix\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"where\\";a:7:{s:4:\\"name\\";s:5:\\"where\\";s:4:\\"desc\\";s:15:\\"mse2_prop_where\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:25:\\"mse2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:21:\\"mse2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:20:\\"mse2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:24:\\"mse2_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"introCutBefore\\";a:7:{s:4:\\"name\\";s:14:\\"introCutBefore\\";s:4:\\"desc\\";s:24:\\"mse2_prop_introCutBefore\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:50;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"introCutAfter\\";a:7:{s:4:\\"name\\";s:13:\\"introCutAfter\\";s:4:\\"desc\\";s:23:\\"mse2_prop_introCutAfter\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:250;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"htagOpen\\";a:7:{s:4:\\"name\\";s:8:\\"htagOpen\\";s:4:\\"desc\\";s:18:\\"mse2_prop_htagOpen\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:3:\\"<b>\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"htagClose\\";a:7:{s:4:\\"name\\";s:9:\\"htagClose\\";s:4:\\"desc\\";s:19:\\"mse2_prop_htagClose\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"<\\/b>\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"parentsVar\\";a:7:{s:4:\\"name\\";s:10:\\"parentsVar\\";s:4:\\"desc\\";s:20:\\"mse2_prop_parentsVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"parents\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"queryVar\\";a:7:{s:4:\\"name\\";s:8:\\"queryVar\\";s:4:\\"desc\\";s:18:\\"mse2_prop_queryVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:20:\\"mse2_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"wrapIfEmpty\\";a:7:{s:4:\\"name\\";s:11:\\"wrapIfEmpty\\";s:4:\\"desc\\";s:21:\\"mse2_prop_wrapIfEmpty\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"forceSearch\\";a:7:{s:4:\\"name\\";s:11:\\"forceSearch\\";s:4:\\"desc\\";s:21:\\"mse2_prop_forceSearch\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:18:\\"mse2_prop_minQuery\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.msearch2.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties, $pdoFetch);\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($htagOpen)) {$htagOpen = \'<b>\';}\\nif (empty($htagClose)) {$htagClose = \'<\\/b>\';}\\nif (empty($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\n$returnIds = !empty($returnIds);\\n$fastMode = !empty($fastMode);\\n\\n$class = \'modResource\';\\n$found = array();\\n$output = null;\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? htmlspecialchars(strip_tags(trim($_REQUEST[$queryVar])))\\n\\t: \'\';\\n\\nif (empty($resources)) {\\n\\tif (empty($query) && isset($_REQUEST[$queryVar])) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query\');\\n\\t}\\n\\telseif (empty($query) && !empty($forceSearch)) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_no_query_var\');\\n\\t}\\n\\telseif (!empty($query) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t\\t$output = $modx->lexicon(\'mse2_err_min_query\');\\n\\t}\\n\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\tif (!empty($output)) {\\n\\t\\treturn !$returnIds\\n\\t\\t\\t? $output\\n\\t\\t\\t: \'\';\\n\\t}\\n\\telseif (!empty($query)) {\\n\\t\\t$found = $mSearch2->Search($query);\\n\\t\\t$ids = array_keys($found);\\n\\t\\t$resources = implode(\',\', $ids);\\n\\t\\tif (empty($found)) {\\n\\t\\t\\tif ($returnIds) {\\n\\t\\t\\t\\treturn \'\';\\n\\t\\t\\t}\\n\\t\\t\\telseif (!empty($query)) {\\n\\t\\t\\t\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($tplWrapper) && !empty($wrapIfEmpty)) {\\n\\t\\t\\t\\t$output = $pdoFetch->getChunk(\\n\\t\\t\\t\\t\\t$tplWrapper,\\n\\t\\t\\t\\t\\tarray(\\n\\t\\t\\t\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\\t\\t\\t\'total\' => 0,\\n\\t\\t\\t\\t\\t\\t\'query\' => $query,\\n\\t\\t\\t\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t\\t\\t\\t),\\n\\t\\t\\t\\t\\t$fastMode\\n\\t\\t\\t\\t);\\n\\t\\t\\t}\\n\\t\\t\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t\\t\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t\\t\\t}\\n\\t\\t\\tif (!empty($toPlaceholder)) {\\n\\t\\t\\t\\t$modx->setPlaceholder($toPlaceholder, $output);\\n\\t\\t\\t\\treturn;\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\treturn $output;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n}\\nelseif (strpos($resources, \'{\') === 0) {\\n\\t$found = $modx->fromJSON($resources);\\n\\t$resources = implode(\',\', array_keys($found));\\n\\tunset($scriptProperties[\'resources\']);\\n}\\n\\/*----------------------------------------------------------------------------------*\\/\\n\\/\\/ Joining tables\\n$leftJoin = array(\\n\\t\'mseIntro\' => array(\\n\\t\\t\'class\' => \'mseIntro\',\\n\\t\\t\'alias\' => \'Intro\',\\n\\t\\t\'on\' => \'`modResource`.`id`=`Intro`.`resource`\'\\n\\t)\\n);\\n\\/\\/ Fields to select\\n$resourceColumns = !empty($includeContent)\\n\\t? $modx->getSelectColumns($class, $class)\\n\\t: $modx->getSelectColumns($class, $class, \'\', array(\'content\'), true);\\n$select = array(\\n\\t$class => $resourceColumns,\\n\\t\'Intro\' => \'intro\'\\n);\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'leftJoin\',\'select\') as $v) {\\n\\tif (!empty($scriptProperties[$v])) {\\n\\t\\t$tmp = $modx->fromJSON($scriptProperties[$v]);\\n\\t\\tif (is_array($tmp)) {\\n\\t\\t\\t$$v = array_merge($$v, $tmp);\\n\\t\\t}\\n\\t}\\n\\tunset($scriptProperties[$v]);\\n}\\n\\n\\/\\/ Default parameters\\n$default = array(\\n\\t\'class\' => $class,\\n\\t\\/\\/,\'where\' => $modx->toJSON($where),\\n\\t\'leftJoin\' => $modx->toJSON($leftJoin),\\n\\t\'select\' => $modx->toJSON($select),\\n\\t\'groupby\' => $class.\'.id\',\\n\\t\'fastMode\' => $fastMode,\\n\\t\'return\' => !empty($returnIds)\\n\\t\\t\\t? \'ids\'\\n\\t\\t\\t: \'data\',\\n\\t\'nestedChunkPrefix\' => \'msearch2_\',\\n);\\nif (!empty($resources)) {\\n\\t$default[\'resources\'] = is_array($resources)\\n\\t\\t? implode(\',\', $resources)\\n\\t\\t: $resources;\\n}\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n$pdoFetch->addTime(\'Query parameters are prepared.\');\\n$rows = $pdoFetch->run();\\n\\n\\/\\/ Processing results\\nif ($returnIds) {\\n\\treturn $rows;\\n}\\nelseif (!empty($rows) && is_array($rows)) {\\n\\t$output = array();\\n\\tforeach ($rows as $k => $row) {\\n\\t\\t\\/\\/ Processing main fields\\n\\t\\t$row[\'weight\'] = isset($found[$row[\'id\']]) ? $found[$row[\'id\']] : \'\';\\n\\t\\t$row[\'intro\'] = $mSearch2->Highlight($row[\'intro\'], $query, $htagOpen, $htagClose);\\n\\n\\t\\t$row[\'idx\'] = $pdoFetch->idx++;\\n\\t\\t$tplRow = $pdoFetch->defineChunk($row);\\n\\t\\t$output[] .= empty($tplRow)\\n\\t\\t\\t? $pdoFetch->getChunk(\'\', $row)\\n\\t\\t\\t: $pdoFetch->getChunk($tplRow, $row, $fastMode);\\n\\t}\\n\\t$pdoFetch->addTime(\'Returning processed chunks\');\\n\\tif (!empty($output)) {\\n\\t\\t$output = implode($outputSeparator, $output);\\n\\t}\\n}\\nelse {\\n\\t$output = $modx->lexicon(\'mse2_err_no_results\');\\n}\\n\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$output .= \'<pre class=\\"mSearchLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n\\t$output = $pdoFetch->getChunk(\\n\\t\\t$tplWrapper,\\n\\t\\tarray(\\n\\t\\t\\t\'output\' => $output,\\n\\t\\t\\t\'total\' => $modx->getPlaceholder($pdoFetch->config[\'totalVar\']),\\n\\t\\t\\t\'query\' => $modx->getPlaceholder($plPrefix.$queryVar),\\n\\t\\t\\t\'parents\' => $modx->getPlaceholder($plPrefix.$parentsVar),\\n\\t\\t),\\n\\t\\t$fastMode\\n\\t);\\n}\\n\\nif (!empty($toPlaceholder)) {\\n\\t$modx->setPlaceholder($toPlaceholder, $output);\\n}\\nelse {\\n\\treturn $output;\\n}"}',
        'guid' => '52e5ef223b45c9bd362ec64bdd937bfa',
        'native_key' => 0,
        'signature' => '687dbe779be992f216d29fa79f2b093e',
      ),
      '70500dd1209554e04c61c492ee53d3f6' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mSearchForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoTools $pdoTools *\\/\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoTools = new $pdoClass($modx, $scriptProperties);\\n$pdoTools->addTime(\'pdoTools loaded.\');\\n\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, array(), $pdoFetch);\\n$mSearch2->initialize($modx->context->key);\\n\\n$config = array(\\n\\t\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'results\',\\n\\t\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',\\n\\t\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n);\\n$scriptProperties = array_merge($scriptProperties, $config);\\n\\nif (empty($tplForm)) {$tplForm = \'tpl.mSearch2.form\';}\\n$form = $pdoTools->getChunk($tplForm, $scriptProperties);\\n\\n$hash = sha1(serialize($scriptProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;\\n\\n$form = str_ireplace(\'<form\', \'<form data-key=\\"\'.$hash.\'\\"\', $form);\\n\\/\\/ Place for enabled log\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$form = str_ireplace(\'<\\/form>\', \\"<\\/form>\\\\n<pre class=\\\\\\"mSearchFormLog\\\\\\"><\\/pre>\\", $form);\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$main_config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n);\\n\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">\\nif (typeof mse2Config == \\"undefined\\") {mse2Config = \'.$modx->toJSON($main_config).\';}\\nif (typeof mse2FormConfig == \\"undefined\\") {mse2FormConfig = {};}\\nmse2FormConfig[\\"\'.$hash.\'\\"] = \'.$modx->toJSON($config).\';\\n<\\/script>\'\\n, true);\\n\\nreturn $form;","locked":0,"properties":"a:10:{s:6:\\"pageId\\";a:7:{s:4:\\"name\\";s:6:\\"pageId\\";s:4:\\"desc\\";s:16:\\"mse2_prop_pageId\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplForm\\";a:7:{s:4:\\"name\\";s:7:\\"tplForm\\";s:4:\\"desc\\";s:17:\\"mse2_prop_tplForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:17:\\"tpl.mSearch2.form\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:13:\\"mse2_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:15:\\"tpl.mSearch2.ac\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:17:\\"mse2_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"mSearch2\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:15:\\"mse2_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:5;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:12:\\"autocomplete\\";a:7:{s:4:\\"name\\";s:12:\\"autocomplete\\";s:4:\\"desc\\";s:22:\\"mse2_prop_autocomplete\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:8:\\"Disabled\\";s:5:\\"value\\";i:0;}i:1;a:2:{s:4:\\"text\\";s:7:\\"Results\\";s:5:\\"value\\";s:7:\\"results\\";}i:2;a:2:{s:4:\\"text\\";s:7:\\"Queries\\";s:5:\\"value\\";s:7:\\"queries\\";}}s:5:\\"value\\";s:7:\\"results\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"queryVar\\";a:7:{s:4:\\"name\\";s:8:\\"queryVar\\";s:4:\\"desc\\";s:18:\\"mse2_prop_queryVar\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:5:\\"query\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"minQuery\\";a:7:{s:4:\\"name\\";s:8:\\"minQuery\\";s:4:\\"desc\\";s:18:\\"mse2_prop_minQuery\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:3;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.msearchform.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoTools $pdoTools *\\/\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoTools = new $pdoClass($modx, $scriptProperties);\\n$pdoTools->addTime(\'pdoTools loaded.\');\\n\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, array(), $pdoFetch);\\n$mSearch2->initialize($modx->context->key);\\n\\n$config = array(\\n\\t\'autocomplete\' => !empty($autocomplete) ? $autocomplete : \'results\',\\n\\t\'queryVar\' => !empty($queryVar) ? $queryVar : \'query\',\\n\\t\'minQuery\' => !empty($minQuery) ? (integer) $minQuery : 3,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n);\\n$scriptProperties = array_merge($scriptProperties, $config);\\n\\nif (empty($tplForm)) {$tplForm = \'tpl.mSearch2.form\';}\\n$form = $pdoTools->getChunk($tplForm, $scriptProperties);\\n\\n$hash = sha1(serialize($scriptProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $scriptProperties;\\n\\n$form = str_ireplace(\'<form\', \'<form data-key=\\"\'.$hash.\'\\"\', $form);\\n\\/\\/ Place for enabled log\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$form = str_ireplace(\'<\\/form>\', \\"<\\/form>\\\\n<pre class=\\\\\\"mSearchFormLog\\\\\\"><\\/pre>\\", $form);\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$main_config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n);\\n\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">\\nif (typeof mse2Config == \\"undefined\\") {mse2Config = \'.$modx->toJSON($main_config).\';}\\nif (typeof mse2FormConfig == \\"undefined\\") {mse2FormConfig = {};}\\nmse2FormConfig[\\"\'.$hash.\'\\"] = \'.$modx->toJSON($config).\';\\n<\\/script>\'\\n, true);\\n\\nreturn $form;"}',
        'guid' => '0043d57b17a57403b49797c463010acf',
        'native_key' => 0,
        'signature' => 'd5514acb287a2cf25dc9db8170c0c64b',
      ),
      'f355eddb84c13a323c48de64f83b4fb7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"mFilter2","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties, $pdoFetch);\\n$mSearch2->initialize($modx->context->key);\\n$savedProperties = array();\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($classActive)) {$classActive = \'active\';}\\nif (isset($scriptProperties[\'disableSuggestions\'])) {$scriptProperties[\'suggestions\'] = empty($scriptProperties[\'disableSuggestions\']);}\\nif (empty($toPlaceholders) && !empty($toPlaceholder)) {$toPlaceholders = $toPlaceholder;}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\nif (isset($_REQUEST[\'limit\']) && is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {$limit = abs($_REQUEST[\'limit\']);}\\nelseif ($limit == \'\') {$limit = 10;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\/\\/ All templates of filters are converted to lowercase\\nforeach ($scriptProperties as $k => $v) {\\n\\tif (strpos($k, \'tplFilter\') === 0) {\\n\\t\\t$tmp = \'tplFilter.\' . strtolower(substr($k, 10));\\n\\t\\tif ($tmp != $k) {\\n\\t\\t\\tunset($scriptProperties[$k]);\\n\\t\\t\\t$scriptProperties[$tmp] = $v;\\n\\t\\t}\\n\\t}\\n}\\n\\n$class = \'modResource\';\\n$output = array(\'filters\' => \'\', \'results\' => \'\', \'total\' => 0, \'limit\' => $limit);\\n$ids = $found = $log = $where = array();\\n\\n\\/\\/ ---------------------- Retrieving ids of resources for filter\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? htmlspecialchars(strip_tags(trim($_REQUEST[$queryVar])))\\n\\t: \'\';\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$ids = array_map(\'trim\', explode(\',\', $resources));\\n}\\nelseif (isset($_REQUEST[$queryVar]) && empty($query)) {\\n\\t$output[\'results\'] =  $modx->lexicon(\'mse2_err_no_query\');\\n}\\nelseif (empty($query) && !empty($forceSearch)) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_query_var\');\\n}\\nelseif (isset($_REQUEST[$queryVar]) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_min_query\');\\n}\\nelseif (isset($_REQUEST[$queryVar])) {\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\t$found = $mSearch2->Search($query);\\n\\t$ids = array_keys($found);\\n\\n\\tif (!empty($ids)) {\\n\\t\\t$tmp = $scriptProperties;\\n\\t\\t$tmp[\'returnIds\'] = 1;\\n\\t\\t$tmp[\'resources\'] = implode(\',\', $ids);\\n\\t\\t$tmp[\'parents\'] = (int) $scriptProperties[\'parents\'];\\n\\t\\t$tmp[\'limit\'] = 0;\\n\\t\\t$ids = explode(\',\', $modx->runSnippet($scriptProperties[\'element\'], $tmp));\\n\\t\\t$pdoFetch->addTime(\'Found ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n\\t}\\n\\n\\tif (empty($ids[0])) {\\n\\t\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');\\n\\t}\\n}\\n\\n$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\/\\/ Has error message - exit\\nif (!empty($output[\'results\'])) {\\n\\t$log = \'\';\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output = $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\t\\treturn $output;\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking resources by status and custom \\"where\\" parameter\\n\\/\\/ Support for specifying property set in the element name\\n$elementName = $scriptProperties[\'element\'];\\n$elementSet = array();\\nif (strpos($elementName, \'@\') !== false) {\\n\\tlist($elementName, $elementSet) = explode(\'@\', $elementName);\\n}\\n\\/** @var modSnippet $snippet *\\/\\nif (!empty($elementName) && $element = $modx->getObject(\'modSnippet\', array(\'name\' => $elementName))) {\\n\\t$elementProperties = $element->getProperties();\\n\\t$elementPropertySet = !empty($elementSet)\\n\\t\\t? $element->getPropertySet($elementSet)\\n\\t\\t: array();\\n\\tif (!is_array($elementPropertySet)) {$elementPropertySet = array();}\\n\\t$params = array_merge(\\n\\t\\t$elementProperties,\\n\\t\\t$elementPropertySet,\\n\\t\\t$scriptProperties,\\n\\t\\tarray(\\n\\t\\t\\t\'parents\' => empty($scriptProperties[$parentsVar]) && !empty($_REQUEST[$parentsVar])\\n\\t\\t\\t\\t? $_REQUEST[$parentsVar]\\n\\t\\t\\t\\t: $scriptProperties[$parentsVar],\\n\\t\\t\\t\'returnIds\' => 1,\\n\\t\\t\\t\'limit\' => 0,\\n\\t\\t)\\n\\t);\\n\\tif (!empty($ids)) {\\n\\t\\t$params[\'resources\'] = implode(\',\', $ids);\\n\\t}\\n\\t$element->setCacheable(false);\\n\\t$tmp = $element->process($params);\\n\\tif (!empty($tmp)) {\\n\\t\\t$tmp = explode(\',\', $tmp);\\n\\t\\t$ids = !empty($ids)\\n\\t\\t\\t? array_intersect($ids, $tmp)\\n\\t\\t\\t: $tmp;\\n\\t}\\n\\t$pdoFetch->addTime(\'Fetched ids for building filters: \\"\'.implode(\',\',$ids).\'\\" from element \\"\'.$elementName.\'\\"\');\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find main snippet with name: \\"\'.$elementName.\'\\"\');\\n\\treturn \'\';\\n}\\n\\n\\/\\/ ---------------------- Nothing to filter, exit\\nif (empty($ids)) {\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\telse {$log = \'\';}\\n\\n\\t$output = array_merge($output, array(\\n\\t\\t\'filters\' => $modx->lexicon(\'mse2_err_no_filters\')\\n\\t\\t,\'results\' => $modx->lexicon(\'mse2_err_no_results\')\\n\\t\\t,\'log\' => $log\\n\\t));\\n\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output[\'results\'] .= $log;\\n\\t\\treturn $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking for suggestions processing\\n\\/\\/ Checking by results count\\nif (!empty($scriptProperties[\'suggestionsMaxResults\']) && count($ids) > $scriptProperties[\'suggestionsMaxResults\']) {\\n\\t$scriptProperties[\'suggestions\'] = false;\\n\\t$pdoFetch->addTime(\'Suggestions disabled by \\"suggestionsMaxResults\\" parameter: results count is \'.count($ids).\', max allowed is \'.$scriptProperties[\'suggestionsMaxResults\']);\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Total number of results: \'.count($ids));\\n}\\n\\n\\/\\/ Then get filters\\n$pdoFetch->addTime(\'Getting filters for ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n$filters = \'\'; $count = 0;\\nif (!empty($ids)) {\\n\\t$filters = $mSearch2->getFilters($ids);\\n\\t\\/\\/ And checking by filters count\\n\\tif (!empty($filters) && $scriptProperties[\'suggestions\']) {\\n\\t\\tforeach ($filters as $tmp) {\\n\\t\\t\\tif (!is_array($tmp)) {continue;}\\n\\t\\t\\t$count += count(array_values($tmp));\\n\\t\\t}\\n\\t\\tif (!empty($scriptProperties[\'suggestionsMaxFilters\']) && $count > $scriptProperties[\'suggestionsMaxFilters\']) {\\n\\t\\t\\t$scriptProperties[\'suggestions\'] = false;\\n\\t\\t\\t$pdoFetch->addTime(\'Suggestions disabled by \\"suggestionsMaxFilters\\" parameter: filters count is \'.$count.\', max allowed is \'.$scriptProperties[\'suggestionsMaxFilters\']);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$pdoFetch->addTime(\'Total number of filters: \'.$count);\\n\\t\\t}\\n\\t}\\n}\\n$modx->setPlaceholder($plPrefix . \'filters_count\', $count );\\n\\n\\n\\/\\/ ---------------------- Loading results\\n$start_sort = implode(\',\', array_map(\'trim\' , explode(\',\', $scriptProperties[\'sort\'])));\\n$start_limit = !empty($scriptProperties[\'limit\']) ? $scriptProperties[\'limit\'] : 0;\\n$suggestions = array();\\n$page = $sort = \'\';\\n\\n\\/\\/ Support for specifying property set in the paginator name\\n$paginatorName = $scriptProperties[\'paginator\'];\\n$paginatorSet = array();\\nif (strpos($paginatorName, \'@\') !== false) {\\n\\tlist($paginatorName, $paginatorSet) = explode(\'@\', $paginatorName);\\n}\\nif (!empty($ids)) {\\n\\t\\/* @var modSnippet $paginator *\\/\\n\\tif ($paginator = $modx->getObject(\'modSnippet\', array(\'name\' => $paginatorName))) {\\n\\t\\t$paginatorProperties = $paginator->getProperties();\\n\\t\\t$paginatorPropertySet = !empty($paginatorSet)\\n\\t\\t\\t? $paginator->getPropertySet($paginatorSet)\\n\\t\\t\\t: array();\\n\\t\\tif (!is_array($paginatorPropertySet)) {$paginatorPropertySet = array();}\\n\\t\\t$paginatorProperties = array_merge(\\n\\t\\t\\t$paginatorProperties\\n\\t\\t\\t,$paginatorPropertySet\\n\\t\\t\\t,$elementPropertySet\\n\\t\\t\\t,$scriptProperties\\n\\t\\t\\t,array(\\n\\t\\t\\t\\t\'resources\' => implode(\',\',$ids)\\n\\t\\t\\t\\t,\'parents\' => \'0\'\\n\\t\\t\\t\\t,\'element\' => $elementName\\n\\t\\t\\t\\t,\'defaultSort\' => $start_sort\\n\\t\\t\\t\\t,\'toPlaceholder\' => false\\n\\t\\t\\t\\t,\'limit\' => $limit\\n\\t\\t\\t)\\n\\t\\t);\\n\\n\\t\\t\\/\\/ Switching chunk for rows, if specified\\n\\t\\tif (!empty($scriptProperties[\'tpls\'])) {\\n\\t\\t\\t$tmp = isset($_REQUEST[\'tpl\']) ? (integer) $_REQUEST[\'tpl\'] : 0;\\n\\t\\t\\t$tpls = array_map(\'trim\', explode(\',\', $scriptProperties[\'tpls\']));\\n\\t\\t\\t$paginatorProperties[\'tpls\'] = $tpls;\\n\\t\\t\\tif (isset($tpls[$tmp])) {\\n\\t\\t\\t\\t$paginatorProperties[\'tpl\'] = $tpls[$tmp];\\n\\t\\t\\t\\t$paginatorProperties[\'tpl_idx\'] = $tmp;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Trying to save weight of found ids if using mSearch2\\n\\t\\t$weight = false;\\n\\t\\tif (!empty($found) && strtolower($paginatorName) == \'msearch2\') {\\n\\t\\t\\t$tmp = array();\\n\\t\\t\\tforeach ($ids as $v) {\\n\\t\\t\\t\\t$tmp[$v] = isset($found[$v])\\n\\t\\t\\t\\t\\t? $found[$v]\\n\\t\\t\\t\\t\\t: 0;\\n\\t\\t\\t}\\n\\t\\t\\t$paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n\\t\\t\\t$weight = true;\\n\\t\\t}\\n\\n\\t\\tif (!empty($_REQUEST[\'sort\'])) {$sort = $_REQUEST[\'sort\'];}\\n\\t\\telseif (!empty($start_sort)) {$sort = $start_sort;}\\n\\t\\telse {\\n\\t\\t\\t\\/*\\n\\t\\t\\t$sortby = !empty($scriptProperties[\'sortby\']) ? $scriptProperties[\'sortby\'] : \'\';\\n\\t\\t\\tif (!empty($sortby)) {\\n\\t\\t\\t\\t$sortdir = !empty($scriptProperties[\'sortdir\']) ? $scriptProperties[\'sortdir\'] : \'asc\';\\n\\t\\t\\t\\t$sort = $sortby.$mSearch2->config[\'method_delimeter\'].$sortdir;\\n\\t\\t\\t}\\n\\t\\t\\t*\\/\\n\\t\\t}\\n\\n\\t\\tif (!empty($_REQUEST[$paginatorProperties[\'pageVarKey\']])) {\\n\\t\\t\\t$page = (int) $_REQUEST[$paginatorProperties[\'pageVarKey\']];\\n\\t\\t}\\n\\t\\tif (!empty($sort)) {\\n\\t\\t\\t$paginatorProperties[\'sortby\'] = $mSearch2->getSortFields($sort);\\n\\t\\t\\t$paginatorProperties[\'sortdir\'] = \'\';\\n\\t\\t}\\n\\n\\t\\t$paginatorProperties[\'start_limit\'] = $start_limit;\\n\\t\\t$savedProperties[\'paginatorProperties\'] = $paginatorProperties;\\n\\n\\t\\t\\/\\/ We have a delimeters in $_GET, so need to filter resources\\n\\t\\tif (strpos(implode(array_keys($_GET)), $mSearch2->config[\'filter_delimeter\']) !== false) {\\n\\t\\t\\t$matched = $mSearch2->Filter($ids, $_REQUEST);\\n\\t\\t\\t$matched = array_intersect($ids, $matched);\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\t$suggestions = $mSearch2->getSuggestions($ids, $_REQUEST, $matched);\\n\\t\\t\\t\\t$pdoFetch->addTime(\'Suggestions retrieved.\');\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ Trying to save weight of found ids again\\n\\t\\t\\tif ($weight) {\\n\\t\\t\\t\\t$tmp = array();\\n\\t\\t\\t\\tforeach ($matched as $v) {$tmp[$v] = isset($found[$v]) ? $found[$v] : 0;}\\n\\t\\t\\t\\t$paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$paginatorProperties[\'resources\'] = implode(\',\', $matched);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t\\/\\/ Saving log\\n\\t\\t$log = $pdoFetch->timings;\\n\\t\\t$pdoFetch->timings = array();\\n\\n\\t\\t\\/\\/$paginator->setProperties($paginatorProperties);\\n\\t\\t$paginator->setCacheable(false);\\n\\t\\t$output[\'results\'] = !empty($paginatorProperties[\'resources\'])\\n\\t\\t\\t? $paginator->process($paginatorProperties)\\n\\t\\t\\t: $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t$output[\'total\'] = $modx->getPlaceholder($paginatorProperties[\'totalVar\']);\\n\\t}\\n\\telse {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n\\t\\treturn \'\';\\n\\t}\\n}\\n\\n\\/\\/ ----------------------  Loading filters\\n$pdoFetch->timings = $log;\\nif (!empty($paginator)) {\\n\\t$pdoFetch->addTime(\'Fired paginator: \\"\'.$paginatorName.\'\\"\');\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n}\\nif (empty($filters)) {\\n\\t$pdoFetch->addTime(\'No filters retrieved\');\\n\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Filters retrieved\');\\n\\t$request = array();\\n\\tforeach ($_GET as $k => $v) {\\n\\t\\t$request[$k] = explode($mSearch2->config[\'values_delimeter\'], $v);\\n\\t}\\n\\n\\tforeach ($filters as $filter => $data) {\\n\\t\\tif (empty($data) || !is_array($data)) {continue;}\\n\\t\\t$tplOuter = !empty($scriptProperties[\'tplFilter.outer.\'.$filter]) ? $scriptProperties[\'tplFilter.outer.\'.$filter] : $scriptProperties[\'tplFilter.outer.default\'];\\n\\t\\t$tplRow = !empty($scriptProperties[\'tplFilter.row.\'.$filter]) ? $scriptProperties[\'tplFilter.row.\'.$filter] : $scriptProperties[\'tplFilter.row.default\'];\\n\\t\\t$tplEmpty = !empty($scriptProperties[\'tplFilter.empty.\'.$filter]) ? $scriptProperties[\'tplFilter.empty.\'.$filter] : \'\';\\n\\n\\t\\t\\/\\/ Caching chunk for quick placeholders\\n\\t\\t$pdoFetch->getChunk($tplRow);\\n\\n\\t\\t$rows = $has_active = \'\';\\n\\t\\tlist($table,$filter2) = explode($mSearch2->config[\'filter_delimeter\'], $filter);\\n\\t\\t$idx = 0;\\n\\t\\tforeach ($data as $v) {\\n\\t\\t\\tif (empty($v)) {continue;}\\n\\t\\t\\t$checked = isset($request[$filter]) && in_array($v[\'value\'], $request[$filter]) && isset($v[\'type\']) && $v[\'type\'] != \'number\';\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\tif ($checked) {$num = \'\'; $has_active = \'has_active\';}\\n\\t\\t\\t\\telse if (isset($suggestions[$filter][$v[\'value\']])) {\\n\\t\\t\\t\\t\\t$num = $suggestions[$filter][$v[\'value\']];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$num = !empty($v[\'resources\']) ? count($v[\'resources\']) : \'\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {$num = \'\';}\\n\\n\\t\\t\\t$rows .= $pdoFetch->getChunk($tplRow, array(\\n\\t\\t\\t\\t\'filter\' => $filter2\\n\\t\\t\\t\\t,\'table\' => $table\\n\\t\\t\\t\\t,\'title\' => $v[\'title\']\\n\\t\\t\\t\\t,\'value\' => $v[\'value\']\\n\\t\\t\\t\\t,\'type\' => $v[\'type\']\\n\\t\\t\\t\\t,\'checked\' => $checked ? \'checked\' : \'\'\\n\\t\\t\\t\\t,\'selected\' => $checked ? \'selected\' : \'\'\\n\\t\\t\\t\\t,\'disabled\' => !$checked && empty($num) && $scriptProperties[\'suggestions\'] ? \'disabled\' : \'\'\\n\\t\\t\\t\\t,\'delimeter\' => $mSearch2->config[\'filter_delimeter\']\\n\\t\\t\\t\\t,\'idx\' => $idx++\\n\\t\\t\\t\\t,\'num\' => $num\\n\\t\\t\\t), $fastMode);\\n\\t\\t}\\n\\n\\t\\t$tpl = empty($rows) ? $tplEmpty : $tplOuter;\\n\\t\\tif (!isset($output[\'filters\'][$filter])) {$output[\'filters\'][$filter] = \'\';}\\n\\t\\t$output[\'filters\'][$filter] .= $pdoFetch->getChunk($tpl, array(\\n\\t\\t\\t\'filter\' => $filter2\\n\\t\\t\\t,\'table\' => $table\\n\\t\\t\\t,\'rows\' => $rows\\n\\t\\t\\t,\'has_active\' => $has_active\\n\\t\\t\\t,\'delimeter\' => $mSearch2->config[\'filter_delimeter\']\\n\\t\\t), $fastMode);\\n\\t}\\n\\n\\tif (empty($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\t\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n\\t}\\n\\telse {\\n\\t\\t$pdoFetch->addTime(\'Filters templated\');\\n\\t}\\n}\\n$pdoFetch->addTime(\'Total filter operations: \'.$mSearch2->filter_operations);\\n\\n\\/\\/ Saving params into cache for ajax requests\\n$savedProperties[\'scriptProperties\'] = $scriptProperties;\\n$hash = sha1(serialize($savedProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $savedProperties;\\n\\n\\/\\/ Active class for sort links\\nif (!empty($sort)) {$output[$sort] = $classActive;}\\nif (isset($paginatorProperties[\'tpl_idx\'])) {\\n\\t$output[\'tpl\'.$paginatorProperties[\'tpl_idx\']] = $classActive;\\n\\t$output[\'tpls\'] = 1;\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t\'queryVar\' => $mSearch2->config[\'queryVar\'],\\n\\t\'filter_delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\'method_delimeter\' => $mSearch2->config[\'method_delimeter\'],\\n\\t\'values_delimeter\' => $mSearch2->config[\'values_delimeter\'],\\n\\t\'start_sort\' => $start_sort,\\n\\t\'start_limit\' => $start_limit,\\n\\t\'start_page\' => 1,\\n\\t\'start_tpl\' => \'\',\\n\\t\'sort\' => $sort == $start_sort ? \'\' : $sort,\\n\\t\'limit\' => $limit == $start_limit ? \'\' : $limit,\\n\\t\'page\' => $page,\\n\\t\'tpl\' => !empty($paginatorProperties[\'tpl_idx\'])\\n\\t\\t\\t? $paginatorProperties[\'tpl_idx\']\\n\\t\\t\\t: \'\',\\n\\t\'parentsVar\' => $parentsVar,\\n\\t\'key\' => $hash,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n\\t$queryVar => isset($_REQUEST[$queryVar]) ? $_REQUEST[$queryVar] : \'\',\\n\\t$parentsVar => isset($_REQUEST[$parentsVar]) ? $_REQUEST[$parentsVar] : \'\',\\n);\\n\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">\\nmse2Config = \'.$modx->toJSON($config).\';\\n<\\/script>\', true);\\n$modx->setPlaceholders($config, $plPrefix);\\n\\n\\/\\/ Prepare output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$modx->setPlaceholders($output[\'filters\'], $toSeparatePlaceholders);\\n\\t$output[\'log\'] = $log;\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\n\\tif (empty($output[\'results\'])) {\\n\\t\\t$pcre = \'\\/^\' . preg_quote($toSeparatePlaceholders) .\'(\\\\d+)$\\/\';\\n\\t\\tforeach ($modx->placeholders as $k => $v) {\\n\\t\\t\\tif (preg_match($pcre, $k)) {\\n\\t\\t\\t\\t$output[\'results\'][] = $v;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$output[\'results\'] = implode($outputSeparator, $output[\'results\']);\\n\\t}\\n\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\tif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\n\\t\\treturn $output;\\n\\t}\\n}","locked":0,"properties":"a:30:{s:9:\\"paginator\\";a:7:{s:4:\\"name\\";s:9:\\"paginator\\";s:4:\\"desc\\";s:19:\\"mse2_prop_paginator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"pdoPage\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"element\\";a:7:{s:4:\\"name\\";s:7:\\"element\\";s:4:\\"desc\\";s:17:\\"mse2_prop_element\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:8:\\"mSearch2\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"sort\\";a:7:{s:4:\\"name\\";s:4:\\"sort\\";s:4:\\"desc\\";s:14:\\"mse2_prop_sort\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"filters\\";a:7:{s:4:\\"name\\";s:7:\\"filters\\";s:4:\\"desc\\";s:17:\\"mse2_prop_filters\\";s:4:\\"type\\";s:8:\\"textarea\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:23:\\"resource|parent:parents\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"showEmptyFilters\\";a:7:{s:4:\\"name\\";s:16:\\"showEmptyFilters\\";s:4:\\"desc\\";s:26:\\"mse2_prop_showEmptyFilters\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"resources\\";a:7:{s:4:\\"name\\";s:9:\\"resources\\";s:4:\\"desc\\";s:19:\\"mse2_prop_resources\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"parents\\";a:7:{s:4:\\"name\\";s:7:\\"parents\\";s:4:\\"desc\\";s:17:\\"mse2_prop_parents\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"depth\\";a:7:{s:4:\\"name\\";s:5:\\"depth\\";s:4:\\"desc\\";s:15:\\"mse2_prop_depth\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplOuter\\";a:7:{s:4:\\"name\\";s:8:\\"tplOuter\\";s:4:\\"desc\\";s:18:\\"mse2_prop_tplOuter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.mFilter2.outer\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:23:\\"tplFilter.outer.default\\";a:7:{s:4:\\"name\\";s:23:\\"tplFilter.outer.default\\";s:4:\\"desc\\";s:33:\\"mse2_prop_tplFilter.outer.default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"tpl.mFilter2.filter.outer\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"tplFilter.row.default\\";a:7:{s:4:\\"name\\";s:21:\\"tplFilter.row.default\\";s:4:\\"desc\\";s:31:\\"mse2_prop_tplFilter.row.default\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.mFilter2.filter.checkbox\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"showHidden\\";a:7:{s:4:\\"name\\";s:10:\\"showHidden\\";s:4:\\"desc\\";s:20:\\"mse2_prop_showHidden\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:21:\\"mse2_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:25:\\"mse2_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"hideContainers\\";a:7:{s:4:\\"name\\";s:14:\\"hideContainers\\";s:4:\\"desc\\";s:24:\\"mse2_prop_hideContainers\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:17:\\"mse2_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"fastMode\\";a:7:{s:4:\\"name\\";s:8:\\"fastMode\\";s:4:\\"desc\\";s:18:\\"mse2_prop_fastMode\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"suggestions\\";a:7:{s:4:\\"name\\";s:11:\\"suggestions\\";s:4:\\"desc\\";s:21:\\"mse2_prop_suggestions\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:1;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"suggestionsMaxFilters\\";a:7:{s:4:\\"name\\";s:21:\\"suggestionsMaxFilters\\";s:4:\\"desc\\";s:31:\\"mse2_prop_suggestionsMaxFilters\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:200;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:21:\\"suggestionsMaxResults\\";a:7:{s:4:\\"name\\";s:21:\\"suggestionsMaxResults\\";s:4:\\"desc\\";s:31:\\"mse2_prop_suggestionsMaxResults\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:1000;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"suggestionsRadio\\";a:7:{s:4:\\"name\\";s:16:\\"suggestionsRadio\\";s:4:\\"desc\\";s:26:\\"mse2_prop_suggestionsRadio\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"toPlaceholders\\";a:7:{s:4:\\"name\\";s:14:\\"toPlaceholders\\";s:4:\\"desc\\";s:24:\\"mse2_prop_toPlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:32:\\"mse2_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"filter_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"filter_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_filter_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"|\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"method_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"method_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_method_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\":\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"values_delimeter\\";a:7:{s:4:\\"name\\";s:16:\\"values_delimeter\\";s:4:\\"desc\\";s:26:\\"mse2_prop_values_delimeter\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\",\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:4:\\"tpls\\";a:7:{s:4:\\"name\\";s:4:\\"tpls\\";s:4:\\"desc\\";s:14:\\"mse2_prop_tpls\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"forceSearch\\";a:7:{s:4:\\"name\\";s:11:\\"forceSearch\\";s:4:\\"desc\\";s:21:\\"mse2_prop_forceSearch\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"fields\\";a:7:{s:4:\\"name\\";s:6:\\"fields\\";s:4:\\"desc\\";s:16:\\"mse2_prop_fields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:9:\\"onlyIndex\\";a:7:{s:4:\\"name\\";s:9:\\"onlyIndex\\";s:4:\\"desc\\";s:19:\\"mse2_prop_onlyIndex\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"msearch2:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/msearch2\\/elements\\/snippets\\/snippet.mfilter2.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif (!$pdoClass = $modx->loadClass($fqn, \'\', false, true)) {return false;}\\n$pdoFetch = new $pdoClass($modx, $scriptProperties);\\n$pdoFetch->addTime(\'pdoTools loaded.\');\\n\\/** @var mSearch2 $mSearch2 *\\/\\nif (!$modx->loadClass(\'msearch2\', MODX_CORE_PATH . \'components\\/msearch2\\/model\\/msearch2\\/\', false, true)) {return false;}\\n$mSearch2 = new mSearch2($modx, $scriptProperties, $pdoFetch);\\n$mSearch2->initialize($modx->context->key);\\n$savedProperties = array();\\n\\nif (empty($queryVar)) {$queryVar = \'query\';}\\nif (empty($parentsVar)) {$parentsVar = \'parents\';}\\nif (empty($minQuery)) {$minQuery = $modx->getOption(\'index_min_words_length\', null, 3, true);}\\nif (empty($classActive)) {$classActive = \'active\';}\\nif (isset($scriptProperties[\'disableSuggestions\'])) {$scriptProperties[\'suggestions\'] = empty($scriptProperties[\'disableSuggestions\']);}\\nif (empty($toPlaceholders) && !empty($toPlaceholder)) {$toPlaceholders = $toPlaceholder;}\\nif (empty($plPrefix)) {$plPrefix = \'mse2_\';}\\nif (isset($_REQUEST[\'limit\']) && is_numeric($_REQUEST[\'limit\']) && abs($_REQUEST[\'limit\']) > 0) {$limit = abs($_REQUEST[\'limit\']);}\\nelseif ($limit == \'\') {$limit = 10;}\\nif (!isset($outputSeparator)) {$outputSeparator = \\"\\\\n\\";}\\n$fastMode = !empty($fastMode);\\n\\/\\/ All templates of filters are converted to lowercase\\nforeach ($scriptProperties as $k => $v) {\\n\\tif (strpos($k, \'tplFilter\') === 0) {\\n\\t\\t$tmp = \'tplFilter.\' . strtolower(substr($k, 10));\\n\\t\\tif ($tmp != $k) {\\n\\t\\t\\tunset($scriptProperties[$k]);\\n\\t\\t\\t$scriptProperties[$tmp] = $v;\\n\\t\\t}\\n\\t}\\n}\\n\\n$class = \'modResource\';\\n$output = array(\'filters\' => \'\', \'results\' => \'\', \'total\' => 0, \'limit\' => $limit);\\n$ids = $found = $log = $where = array();\\n\\n\\/\\/ ---------------------- Retrieving ids of resources for filter\\n$query = !empty($_REQUEST[$queryVar])\\n\\t? htmlspecialchars(strip_tags(trim($_REQUEST[$queryVar])))\\n\\t: \'\';\\n\\n\\/\\/ Filter by ids\\nif (!empty($resources)) {\\n\\t$ids = array_map(\'trim\', explode(\',\', $resources));\\n}\\nelseif (isset($_REQUEST[$queryVar]) && empty($query)) {\\n\\t$output[\'results\'] =  $modx->lexicon(\'mse2_err_no_query\');\\n}\\nelseif (empty($query) && !empty($forceSearch)) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_query_var\');\\n}\\nelseif (isset($_REQUEST[$queryVar]) && !preg_match(\'\\/^[0-9]{2,}$\\/\', $query) && mb_strlen($query,\'UTF-8\') < $minQuery) {\\n\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_min_query\');\\n}\\nelseif (isset($_REQUEST[$queryVar])) {\\n\\t$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\t$found = $mSearch2->Search($query);\\n\\t$ids = array_keys($found);\\n\\n\\tif (!empty($ids)) {\\n\\t\\t$tmp = $scriptProperties;\\n\\t\\t$tmp[\'returnIds\'] = 1;\\n\\t\\t$tmp[\'resources\'] = implode(\',\', $ids);\\n\\t\\t$tmp[\'parents\'] = (int) $scriptProperties[\'parents\'];\\n\\t\\t$tmp[\'limit\'] = 0;\\n\\t\\t$ids = explode(\',\', $modx->runSnippet($scriptProperties[\'element\'], $tmp));\\n\\t\\t$pdoFetch->addTime(\'Found ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n\\t}\\n\\n\\tif (empty($ids[0])) {\\n\\t\\t$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');\\n\\t}\\n}\\n\\n$modx->setPlaceholder($plPrefix.$queryVar, $query);\\n\\n\\/\\/ Has error message - exit\\nif (!empty($output[\'results\'])) {\\n\\t$log = \'\';\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output = $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\t\\treturn $output;\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking resources by status and custom \\"where\\" parameter\\n\\/\\/ Support for specifying property set in the element name\\n$elementName = $scriptProperties[\'element\'];\\n$elementSet = array();\\nif (strpos($elementName, \'@\') !== false) {\\n\\tlist($elementName, $elementSet) = explode(\'@\', $elementName);\\n}\\n\\/** @var modSnippet $snippet *\\/\\nif (!empty($elementName) && $element = $modx->getObject(\'modSnippet\', array(\'name\' => $elementName))) {\\n\\t$elementProperties = $element->getProperties();\\n\\t$elementPropertySet = !empty($elementSet)\\n\\t\\t? $element->getPropertySet($elementSet)\\n\\t\\t: array();\\n\\tif (!is_array($elementPropertySet)) {$elementPropertySet = array();}\\n\\t$params = array_merge(\\n\\t\\t$elementProperties,\\n\\t\\t$elementPropertySet,\\n\\t\\t$scriptProperties,\\n\\t\\tarray(\\n\\t\\t\\t\'parents\' => empty($scriptProperties[$parentsVar]) && !empty($_REQUEST[$parentsVar])\\n\\t\\t\\t\\t? $_REQUEST[$parentsVar]\\n\\t\\t\\t\\t: $scriptProperties[$parentsVar],\\n\\t\\t\\t\'returnIds\' => 1,\\n\\t\\t\\t\'limit\' => 0,\\n\\t\\t)\\n\\t);\\n\\tif (!empty($ids)) {\\n\\t\\t$params[\'resources\'] = implode(\',\', $ids);\\n\\t}\\n\\t$element->setCacheable(false);\\n\\t$tmp = $element->process($params);\\n\\tif (!empty($tmp)) {\\n\\t\\t$tmp = explode(\',\', $tmp);\\n\\t\\t$ids = !empty($ids)\\n\\t\\t\\t? array_intersect($ids, $tmp)\\n\\t\\t\\t: $tmp;\\n\\t}\\n\\t$pdoFetch->addTime(\'Fetched ids for building filters: \\"\'.implode(\',\',$ids).\'\\" from element \\"\'.$elementName.\'\\"\');\\n}\\nelse {\\n\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find main snippet with name: \\"\'.$elementName.\'\\"\');\\n\\treturn \'\';\\n}\\n\\n\\/\\/ ---------------------- Nothing to filter, exit\\nif (empty($ids)) {\\n\\tif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n\\t}\\n\\telse {$log = \'\';}\\n\\n\\t$output = array_merge($output, array(\\n\\t\\t\'filters\' => $modx->lexicon(\'mse2_err_no_filters\')\\n\\t\\t,\'results\' => $modx->lexicon(\'mse2_err_no_results\')\\n\\t\\t,\'log\' => $log\\n\\t));\\n\\n\\tif (!empty($toSeparatePlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telseif (!empty($toPlaceholders)) {\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t\\treturn;\\n\\t}\\n\\telse {\\n\\t\\t$output[\'results\'] .= $log;\\n\\t\\treturn $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t}\\n}\\n\\n\\/\\/ ---------------------- Checking for suggestions processing\\n\\/\\/ Checking by results count\\nif (!empty($scriptProperties[\'suggestionsMaxResults\']) && count($ids) > $scriptProperties[\'suggestionsMaxResults\']) {\\n\\t$scriptProperties[\'suggestions\'] = false;\\n\\t$pdoFetch->addTime(\'Suggestions disabled by \\"suggestionsMaxResults\\" parameter: results count is \'.count($ids).\', max allowed is \'.$scriptProperties[\'suggestionsMaxResults\']);\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Total number of results: \'.count($ids));\\n}\\n\\n\\/\\/ Then get filters\\n$pdoFetch->addTime(\'Getting filters for ids: \\"\'.implode(\',\',$ids).\'\\"\');\\n$filters = \'\'; $count = 0;\\nif (!empty($ids)) {\\n\\t$filters = $mSearch2->getFilters($ids);\\n\\t\\/\\/ And checking by filters count\\n\\tif (!empty($filters) && $scriptProperties[\'suggestions\']) {\\n\\t\\tforeach ($filters as $tmp) {\\n\\t\\t\\tif (!is_array($tmp)) {continue;}\\n\\t\\t\\t$count += count(array_values($tmp));\\n\\t\\t}\\n\\t\\tif (!empty($scriptProperties[\'suggestionsMaxFilters\']) && $count > $scriptProperties[\'suggestionsMaxFilters\']) {\\n\\t\\t\\t$scriptProperties[\'suggestions\'] = false;\\n\\t\\t\\t$pdoFetch->addTime(\'Suggestions disabled by \\"suggestionsMaxFilters\\" parameter: filters count is \'.$count.\', max allowed is \'.$scriptProperties[\'suggestionsMaxFilters\']);\\n\\t\\t}\\n\\t\\telse {\\n\\t\\t\\t$pdoFetch->addTime(\'Total number of filters: \'.$count);\\n\\t\\t}\\n\\t}\\n}\\n$modx->setPlaceholder($plPrefix . \'filters_count\', $count );\\n\\n\\n\\/\\/ ---------------------- Loading results\\n$start_sort = implode(\',\', array_map(\'trim\' , explode(\',\', $scriptProperties[\'sort\'])));\\n$start_limit = !empty($scriptProperties[\'limit\']) ? $scriptProperties[\'limit\'] : 0;\\n$suggestions = array();\\n$page = $sort = \'\';\\n\\n\\/\\/ Support for specifying property set in the paginator name\\n$paginatorName = $scriptProperties[\'paginator\'];\\n$paginatorSet = array();\\nif (strpos($paginatorName, \'@\') !== false) {\\n\\tlist($paginatorName, $paginatorSet) = explode(\'@\', $paginatorName);\\n}\\nif (!empty($ids)) {\\n\\t\\/* @var modSnippet $paginator *\\/\\n\\tif ($paginator = $modx->getObject(\'modSnippet\', array(\'name\' => $paginatorName))) {\\n\\t\\t$paginatorProperties = $paginator->getProperties();\\n\\t\\t$paginatorPropertySet = !empty($paginatorSet)\\n\\t\\t\\t? $paginator->getPropertySet($paginatorSet)\\n\\t\\t\\t: array();\\n\\t\\tif (!is_array($paginatorPropertySet)) {$paginatorPropertySet = array();}\\n\\t\\t$paginatorProperties = array_merge(\\n\\t\\t\\t$paginatorProperties\\n\\t\\t\\t,$paginatorPropertySet\\n\\t\\t\\t,$elementPropertySet\\n\\t\\t\\t,$scriptProperties\\n\\t\\t\\t,array(\\n\\t\\t\\t\\t\'resources\' => implode(\',\',$ids)\\n\\t\\t\\t\\t,\'parents\' => \'0\'\\n\\t\\t\\t\\t,\'element\' => $elementName\\n\\t\\t\\t\\t,\'defaultSort\' => $start_sort\\n\\t\\t\\t\\t,\'toPlaceholder\' => false\\n\\t\\t\\t\\t,\'limit\' => $limit\\n\\t\\t\\t)\\n\\t\\t);\\n\\n\\t\\t\\/\\/ Switching chunk for rows, if specified\\n\\t\\tif (!empty($scriptProperties[\'tpls\'])) {\\n\\t\\t\\t$tmp = isset($_REQUEST[\'tpl\']) ? (integer) $_REQUEST[\'tpl\'] : 0;\\n\\t\\t\\t$tpls = array_map(\'trim\', explode(\',\', $scriptProperties[\'tpls\']));\\n\\t\\t\\t$paginatorProperties[\'tpls\'] = $tpls;\\n\\t\\t\\tif (isset($tpls[$tmp])) {\\n\\t\\t\\t\\t$paginatorProperties[\'tpl\'] = $tpls[$tmp];\\n\\t\\t\\t\\t$paginatorProperties[\'tpl_idx\'] = $tmp;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t\\/\\/ Trying to save weight of found ids if using mSearch2\\n\\t\\t$weight = false;\\n\\t\\tif (!empty($found) && strtolower($paginatorName) == \'msearch2\') {\\n\\t\\t\\t$tmp = array();\\n\\t\\t\\tforeach ($ids as $v) {\\n\\t\\t\\t\\t$tmp[$v] = isset($found[$v])\\n\\t\\t\\t\\t\\t? $found[$v]\\n\\t\\t\\t\\t\\t: 0;\\n\\t\\t\\t}\\n\\t\\t\\t$paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n\\t\\t\\t$weight = true;\\n\\t\\t}\\n\\n\\t\\tif (!empty($_REQUEST[\'sort\'])) {$sort = $_REQUEST[\'sort\'];}\\n\\t\\telseif (!empty($start_sort)) {$sort = $start_sort;}\\n\\t\\telse {\\n\\t\\t\\t\\/*\\n\\t\\t\\t$sortby = !empty($scriptProperties[\'sortby\']) ? $scriptProperties[\'sortby\'] : \'\';\\n\\t\\t\\tif (!empty($sortby)) {\\n\\t\\t\\t\\t$sortdir = !empty($scriptProperties[\'sortdir\']) ? $scriptProperties[\'sortdir\'] : \'asc\';\\n\\t\\t\\t\\t$sort = $sortby.$mSearch2->config[\'method_delimeter\'].$sortdir;\\n\\t\\t\\t}\\n\\t\\t\\t*\\/\\n\\t\\t}\\n\\n\\t\\tif (!empty($_REQUEST[$paginatorProperties[\'pageVarKey\']])) {\\n\\t\\t\\t$page = (int) $_REQUEST[$paginatorProperties[\'pageVarKey\']];\\n\\t\\t}\\n\\t\\tif (!empty($sort)) {\\n\\t\\t\\t$paginatorProperties[\'sortby\'] = $mSearch2->getSortFields($sort);\\n\\t\\t\\t$paginatorProperties[\'sortdir\'] = \'\';\\n\\t\\t}\\n\\n\\t\\t$paginatorProperties[\'start_limit\'] = $start_limit;\\n\\t\\t$savedProperties[\'paginatorProperties\'] = $paginatorProperties;\\n\\n\\t\\t\\/\\/ We have a delimeters in $_GET, so need to filter resources\\n\\t\\tif (strpos(implode(array_keys($_GET)), $mSearch2->config[\'filter_delimeter\']) !== false) {\\n\\t\\t\\t$matched = $mSearch2->Filter($ids, $_REQUEST);\\n\\t\\t\\t$matched = array_intersect($ids, $matched);\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\t$suggestions = $mSearch2->getSuggestions($ids, $_REQUEST, $matched);\\n\\t\\t\\t\\t$pdoFetch->addTime(\'Suggestions retrieved.\');\\n\\t\\t\\t}\\n\\t\\t\\t\\/\\/ Trying to save weight of found ids again\\n\\t\\t\\tif ($weight) {\\n\\t\\t\\t\\t$tmp = array();\\n\\t\\t\\t\\tforeach ($matched as $v) {$tmp[$v] = isset($found[$v]) ? $found[$v] : 0;}\\n\\t\\t\\t\\t$paginatorProperties[\'resources\'] = $modx->toJSON($tmp);\\n\\t\\t\\t}\\n\\t\\t\\telse {\\n\\t\\t\\t\\t$paginatorProperties[\'resources\'] = implode(\',\', $matched);\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t\\/\\/ Saving log\\n\\t\\t$log = $pdoFetch->timings;\\n\\t\\t$pdoFetch->timings = array();\\n\\n\\t\\t\\/\\/$paginator->setProperties($paginatorProperties);\\n\\t\\t$paginator->setCacheable(false);\\n\\t\\t$output[\'results\'] = !empty($paginatorProperties[\'resources\'])\\n\\t\\t\\t? $paginator->process($paginatorProperties)\\n\\t\\t\\t: $modx->lexicon(\'mse2_err_no_results\');\\n\\t\\t$output[\'total\'] = $modx->getPlaceholder($paginatorProperties[\'totalVar\']);\\n\\t}\\n\\telse {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, \'[mSearch2] Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n\\t\\treturn \'\';\\n\\t}\\n}\\n\\n\\/\\/ ----------------------  Loading filters\\n$pdoFetch->timings = $log;\\nif (!empty($paginator)) {\\n\\t$pdoFetch->addTime(\'Fired paginator: \\"\'.$paginatorName.\'\\"\');\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Could not find pagination snippet with name: \\"\'.$paginatorName.\'\\"\');\\n}\\nif (empty($filters)) {\\n\\t$pdoFetch->addTime(\'No filters retrieved\');\\n\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n}\\nelse {\\n\\t$pdoFetch->addTime(\'Filters retrieved\');\\n\\t$request = array();\\n\\tforeach ($_GET as $k => $v) {\\n\\t\\t$request[$k] = explode($mSearch2->config[\'values_delimeter\'], $v);\\n\\t}\\n\\n\\tforeach ($filters as $filter => $data) {\\n\\t\\tif (empty($data) || !is_array($data)) {continue;}\\n\\t\\t$tplOuter = !empty($scriptProperties[\'tplFilter.outer.\'.$filter]) ? $scriptProperties[\'tplFilter.outer.\'.$filter] : $scriptProperties[\'tplFilter.outer.default\'];\\n\\t\\t$tplRow = !empty($scriptProperties[\'tplFilter.row.\'.$filter]) ? $scriptProperties[\'tplFilter.row.\'.$filter] : $scriptProperties[\'tplFilter.row.default\'];\\n\\t\\t$tplEmpty = !empty($scriptProperties[\'tplFilter.empty.\'.$filter]) ? $scriptProperties[\'tplFilter.empty.\'.$filter] : \'\';\\n\\n\\t\\t\\/\\/ Caching chunk for quick placeholders\\n\\t\\t$pdoFetch->getChunk($tplRow);\\n\\n\\t\\t$rows = $has_active = \'\';\\n\\t\\tlist($table,$filter2) = explode($mSearch2->config[\'filter_delimeter\'], $filter);\\n\\t\\t$idx = 0;\\n\\t\\tforeach ($data as $v) {\\n\\t\\t\\tif (empty($v)) {continue;}\\n\\t\\t\\t$checked = isset($request[$filter]) && in_array($v[\'value\'], $request[$filter]) && isset($v[\'type\']) && $v[\'type\'] != \'number\';\\n\\t\\t\\tif ($scriptProperties[\'suggestions\']) {\\n\\t\\t\\t\\tif ($checked) {$num = \'\'; $has_active = \'has_active\';}\\n\\t\\t\\t\\telse if (isset($suggestions[$filter][$v[\'value\']])) {\\n\\t\\t\\t\\t\\t$num = $suggestions[$filter][$v[\'value\']];\\n\\t\\t\\t\\t}\\n\\t\\t\\t\\telse {\\n\\t\\t\\t\\t\\t$num = !empty($v[\'resources\']) ? count($v[\'resources\']) : \'\';\\n\\t\\t\\t\\t}\\n\\t\\t\\t} else {$num = \'\';}\\n\\n\\t\\t\\t$rows .= $pdoFetch->getChunk($tplRow, array(\\n\\t\\t\\t\\t\'filter\' => $filter2\\n\\t\\t\\t\\t,\'table\' => $table\\n\\t\\t\\t\\t,\'title\' => $v[\'title\']\\n\\t\\t\\t\\t,\'value\' => $v[\'value\']\\n\\t\\t\\t\\t,\'type\' => $v[\'type\']\\n\\t\\t\\t\\t,\'checked\' => $checked ? \'checked\' : \'\'\\n\\t\\t\\t\\t,\'selected\' => $checked ? \'selected\' : \'\'\\n\\t\\t\\t\\t,\'disabled\' => !$checked && empty($num) && $scriptProperties[\'suggestions\'] ? \'disabled\' : \'\'\\n\\t\\t\\t\\t,\'delimeter\' => $mSearch2->config[\'filter_delimeter\']\\n\\t\\t\\t\\t,\'idx\' => $idx++\\n\\t\\t\\t\\t,\'num\' => $num\\n\\t\\t\\t), $fastMode);\\n\\t\\t}\\n\\n\\t\\t$tpl = empty($rows) ? $tplEmpty : $tplOuter;\\n\\t\\tif (!isset($output[\'filters\'][$filter])) {$output[\'filters\'][$filter] = \'\';}\\n\\t\\t$output[\'filters\'][$filter] .= $pdoFetch->getChunk($tpl, array(\\n\\t\\t\\t\'filter\' => $filter2\\n\\t\\t\\t,\'table\' => $table\\n\\t\\t\\t,\'rows\' => $rows\\n\\t\\t\\t,\'has_active\' => $has_active\\n\\t\\t\\t,\'delimeter\' => $mSearch2->config[\'filter_delimeter\']\\n\\t\\t), $fastMode);\\n\\t}\\n\\n\\tif (empty($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = $modx->lexicon(\'mse2_err_no_filters\');\\n\\t\\tif (empty($output[\'results\'])) {$output[\'results\'] = $modx->lexicon(\'mse2_err_no_results\');}\\n\\t}\\n\\telse {\\n\\t\\t$pdoFetch->addTime(\'Filters templated\');\\n\\t}\\n}\\n$pdoFetch->addTime(\'Total filter operations: \'.$mSearch2->filter_operations);\\n\\n\\/\\/ Saving params into cache for ajax requests\\n$savedProperties[\'scriptProperties\'] = $scriptProperties;\\n$hash = sha1(serialize($savedProperties));\\n$_SESSION[\'mSearch2\'][$hash] = $savedProperties;\\n\\n\\/\\/ Active class for sort links\\nif (!empty($sort)) {$output[$sort] = $classActive;}\\nif (isset($paginatorProperties[\'tpl_idx\'])) {\\n\\t$output[\'tpl\'.$paginatorProperties[\'tpl_idx\']] = $classActive;\\n\\t$output[\'tpls\'] = 1;\\n}\\n\\n\\/\\/ Setting values for frontend javascript\\n$config = array(\\n\\t\'cssUrl\' => $mSearch2->config[\'cssUrl\'].\'web\\/\',\\n\\t\'jsUrl\' => $mSearch2->config[\'jsUrl\'].\'web\\/\',\\n\\t\'actionUrl\' => $mSearch2->config[\'actionUrl\'],\\n\\t\'queryVar\' => $mSearch2->config[\'queryVar\'],\\n\\t\'filter_delimeter\' => $mSearch2->config[\'filter_delimeter\'],\\n\\t\'method_delimeter\' => $mSearch2->config[\'method_delimeter\'],\\n\\t\'values_delimeter\' => $mSearch2->config[\'values_delimeter\'],\\n\\t\'start_sort\' => $start_sort,\\n\\t\'start_limit\' => $start_limit,\\n\\t\'start_page\' => 1,\\n\\t\'start_tpl\' => \'\',\\n\\t\'sort\' => $sort == $start_sort ? \'\' : $sort,\\n\\t\'limit\' => $limit == $start_limit ? \'\' : $limit,\\n\\t\'page\' => $page,\\n\\t\'tpl\' => !empty($paginatorProperties[\'tpl_idx\'])\\n\\t\\t\\t? $paginatorProperties[\'tpl_idx\']\\n\\t\\t\\t: \'\',\\n\\t\'parentsVar\' => $parentsVar,\\n\\t\'key\' => $hash,\\n\\t\'pageId\' => !empty($pageId) ? (integer) $pageId : $modx->resource->id,\\n\\t$queryVar => isset($_REQUEST[$queryVar]) ? $_REQUEST[$queryVar] : \'\',\\n\\t$parentsVar => isset($_REQUEST[$parentsVar]) ? $_REQUEST[$parentsVar] : \'\',\\n);\\n\\n$modx->regClientStartupScript(\'\\n<script type=\\"text\\/javascript\\">\\nmse2Config = \'.$modx->toJSON($config).\';\\n<\\/script>\', true);\\n$modx->setPlaceholders($config, $plPrefix);\\n\\n\\/\\/ Prepare output\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n\\t$log = \'<pre class=\\"mFilterLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\nif (!empty($toSeparatePlaceholders)) {\\n\\t$modx->setPlaceholders($output[\'filters\'], $toSeparatePlaceholders);\\n\\t$output[\'log\'] = $log;\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\n\\tif (empty($output[\'results\'])) {\\n\\t\\t$pcre = \'\\/^\' . preg_quote($toSeparatePlaceholders) .\'(\\\\d+)$\\/\';\\n\\t\\tforeach ($modx->placeholders as $k => $v) {\\n\\t\\t\\tif (preg_match($pcre, $k)) {\\n\\t\\t\\t\\t$output[\'results\'][] = $v;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t\\t$output[\'results\'] = implode($outputSeparator, $output[\'results\']);\\n\\t}\\n\\n\\t$modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n\\tif (is_array($output[\'filters\'])) {\\n\\t\\t$output[\'filters\'] = implode($outputSeparator, $output[\'filters\']);\\n\\t}\\n\\tif (!empty($toPlaceholders)) {\\n\\t\\t$output[\'log\'] = $log;\\n\\t\\t$modx->setPlaceholders($output, $toPlaceholders);\\n\\t}\\n\\telse {\\n\\t\\t$output = $pdoFetch->getChunk($scriptProperties[\'tplOuter\'], $output, $fastMode);\\n\\t\\t$output .= $log;\\n\\n\\t\\treturn $output;\\n\\t}\\n}"}',
        'guid' => '243d2c85c50055dfacc9c6879954b57e',
        'native_key' => 0,
        'signature' => '276c941f43638919fd52b95bd39a7483',
      ),
    ),
    'Plugins' => 
    array (
      'b792a44c1703cba0edab55032e852f3c' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":0,"source":0,"property_preprocess":0,"name":"mSearch2","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"$id = 0;\\n\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormSave\':\\n\\tcase \'OnResourceDelete\':\\n\\tcase \'OnResourceUndelete\':\\n\\t\\t\\/* @var modResource $modResource *\\/\\n\\t\\tif (!empty($resource) && $resource instanceof modResource) {\\n\\t\\t\\t$id = $resource->get(\'id\');\\n\\t\\t}\\n\\tbreak;\\n\\n\\tcase \'OnCommentSave\':\\n\\tcase \'OnCommentRemove\':\\n\\tcase \'OnCommentDelete\':\\n\\t\\t\\/* @var TicketComment $TicketComment *\\/\\n\\t\\tif (!empty($TicketComment) && $TicketComment instanceof TicketComment) {\\n\\t\\t\\t$id = $TicketComment->getOne(\'Thread\')->get(\'resource\');\\n\\t\\t}\\n\\tbreak;\\n\\n}\\n\\n\\nif (!empty($id)) {\\n\\t\\/* @var modProcessorResponse $response *\\/\\n\\t$response = $modx->runProcessor(\'mgr\\/index\\/update\', array(\'id\' => $id), array(\'processors_path\' => MODX_CORE_PATH . \'components\\/msearch2\\/processors\\/\'));\\n\\n\\tif ($response->isError()) {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, print_r($response->getAllErrors(), true));\\n\\t}\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":1,"static_file":"core\\/components\\/msearch2\\/elements\\/plugins\\/plugin.msearch2.php","content":"$id = 0;\\n\\nswitch ($modx->event->name) {\\n\\n\\tcase \'OnDocFormSave\':\\n\\tcase \'OnResourceDelete\':\\n\\tcase \'OnResourceUndelete\':\\n\\t\\t\\/* @var modResource $modResource *\\/\\n\\t\\tif (!empty($resource) && $resource instanceof modResource) {\\n\\t\\t\\t$id = $resource->get(\'id\');\\n\\t\\t}\\n\\tbreak;\\n\\n\\tcase \'OnCommentSave\':\\n\\tcase \'OnCommentRemove\':\\n\\tcase \'OnCommentDelete\':\\n\\t\\t\\/* @var TicketComment $TicketComment *\\/\\n\\t\\tif (!empty($TicketComment) && $TicketComment instanceof TicketComment) {\\n\\t\\t\\t$id = $TicketComment->getOne(\'Thread\')->get(\'resource\');\\n\\t\\t}\\n\\tbreak;\\n\\n}\\n\\n\\nif (!empty($id)) {\\n\\t\\/* @var modProcessorResponse $response *\\/\\n\\t$response = $modx->runProcessor(\'mgr\\/index\\/update\', array(\'id\' => $id), array(\'processors_path\' => MODX_CORE_PATH . \'components\\/msearch2\\/processors\\/\'));\\n\\n\\tif ($response->isError()) {\\n\\t\\t$modx->log(modX::LOG_LEVEL_ERROR, print_r($response->getAllErrors(), true));\\n\\t}\\n}"}',
        'guid' => '181f5c10546cefa39aad1344537f7a89',
        'native_key' => 0,
        'signature' => '928675e8de760b9d62be17bd9de81536',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '8cf22e198b5204c1872c0751999478c9' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormSave","priority":1,"propertyset":0}',
              'guid' => '2cda1a510e474602b6c8dcd7ea5dbba0',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormSave',
              ),
              'signature' => '631a7070e5b47a01fcd8bd30f75988a3',
            ),
            'aba5a39dea2e734ab5e0ee76015c65fd' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnResourceDelete","priority":1,"propertyset":0}',
              'guid' => '6f4fe3bc23d90359d3052d72ef5a8724',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnResourceDelete',
              ),
              'signature' => '73d63532b24f4318e5a3ea7a23d40432',
            ),
            'c35f95e6d77dfa70c0fe2b8c55732cf9' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnResourceUndelete","priority":1,"propertyset":0}',
              'guid' => '5d6b1982e8e6207f2ea13a131eb544df',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnResourceUndelete',
              ),
              'signature' => 'aa2b5fa6c20f6eb583bb3cbb824ea876',
            ),
            'e7267785c7c6d91d37056e3d3c778692' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentSave","priority":1,"propertyset":0}',
              'guid' => '121cc2287e667b772df2e4a9a69b9b65',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentSave',
              ),
              'signature' => '549785fd32bd4329b79a61d0a55a12c6',
            ),
            '5991c8c648bb9baedbca4659a8c9130e' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentRemove","priority":1,"propertyset":0}',
              'guid' => 'a3bc6000017a44bd88b62eb887e1567c',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentRemove',
              ),
              'signature' => 'c01010254f891e6856dfa693887d42bc',
            ),
            'b203274a49a7c09c2be1c1532d5219ed' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnCommentDelete","priority":1,"propertyset":0}',
              'guid' => '5d5f9f7c7ede629e589e05dca2f15426',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnCommentDelete',
              ),
              'signature' => 'f6e9af27bdf9153ef7ad8cec5b330bba',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => false,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'msearch2',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"msearch2-1.2.4-pl1\\/modCategory\\/82674a0bee6aacfd09be82bfa0df470e\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"msearch2"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"msearch2-1.2.4-pl1\\/modCategory\\/82674a0bee6aacfd09be82bfa0df470e\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"msearch2"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.2.4-pl1\\/modCategory\\/82674a0bee6aacfd09be82bfa0df470e.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.2.4-pl1\\/modCategory\\/82674a0bee6aacfd09be82bfa0df470e.resolve.setup.resolver","type":"php","name":"resolve.setup"}',
    ),
    4 => 
    array (
      'type' => 'php',
      'body' => '{"source":"msearch2-1.2.4-pl1\\/modCategory\\/82674a0bee6aacfd09be82bfa0df470e.resolve.update.resolver","type":"php","name":"resolve.update"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => 'be0331e0187395f2c5045013a6992984',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '82674a0bee6aacfd09be82bfa0df470e',
  'native_key' => 1,
  'object' => '{"id":1,"parent":0,"category":"mSearch2"}',
);