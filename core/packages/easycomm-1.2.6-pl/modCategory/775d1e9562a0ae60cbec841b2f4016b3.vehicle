<?php return array (
  'unique_key' => 'category',
  'preserve_keys' => false,
  'update_object' => true,
  'related_objects' => 
  array (
    'Chunks' => 
    array (
      'd52fdf9a5080316d81ed3ca00a5d932a' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecMessages.Row","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div id=\\"ec-[[+thread_name]]-message-[[+id]]\\" class=\\"ec-message\\">\\n    <p><strong>[[+user_name]]<\\/strong><span class=\\"ec-message__date\\"> [[+date:dateAgo]]<\\/span><\\/p>\\n    <div class=\\"ec-stars\\">\\n        <span class=\\"rating-[[+rating]]\\"><\\/span>\\n    <\\/div>\\n    <p>[[+text]]<\\/p>\\n    [[+reply_text]]\\n<\\/div>\\n\\n<!--ec_reply_text <div class=\\"ec-message__reply\\">[[+reply_author]]<p>[[+reply_text]]<\\/p><\\/div>-->\\n<!--ec_reply_author <p><strong>[[+reply_author]]<\\/strong><\\/p>-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_messages_row.tpl","content":"<div id=\\"ec-[[+thread_name]]-message-[[+id]]\\" class=\\"ec-message\\">\\n    <p><strong>[[+user_name]]<\\/strong><span class=\\"ec-message__date\\"> [[+date:dateAgo]]<\\/span><\\/p>\\n    <div class=\\"ec-stars\\">\\n        <span class=\\"rating-[[+rating]]\\"><\\/span>\\n    <\\/div>\\n    <p>[[+text]]<\\/p>\\n    [[+reply_text]]\\n<\\/div>\\n\\n<!--ec_reply_text <div class=\\"ec-message__reply\\">[[+reply_author]]<p>[[+reply_text]]<\\/p><\\/div>-->\\n<!--ec_reply_author <p><strong>[[+reply_author]]<\\/strong><\\/p>-->"}',
        'guid' => '0f6c6dc6cab4b3505196a7cfe6e6e40a',
        'native_key' => 0,
        'signature' => '66d7bc978bd1f633b6837df889508e5b',
      ),
      '6756df4896260998638b193b33f68c05' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<h2>[[%ec_fe_message_add]]<\\/h2>\\n<form class=\\"form well ec-form\\" method=\\"post\\" role=\\"form\\" id=\\"ec-form-[[+fid]]\\" data-fid=\\"[[+fid]]\\" action=\\"\\">\\n    <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\">\\n\\n    <div class=\\"form-group ec-antispam\\">\\n        <label for=\\"ec-[[+antispam_field]]-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_antismap]]<\\/label>\\n        <input type=\\"text\\" name=\\"[[+antispam_field]]\\" class=\\"form-control\\" id=\\"ec-[[+antispam_field]]-[[+fid]]\\" value=\\"\\" \\/>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_name-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_name]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_name\\" class=\\"form-control\\" id=\\"ec-user_name-[[+fid]]\\" value=\\"[[+user_name]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_name-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_email-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_email]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_email\\" class=\\"form-control\\" id=\\"ec-user_email-[[+fid]]\\" value=\\"[[+user_email]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_email-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_contacts-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_contacts]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_contacts\\" class=\\"form-control\\" id=\\"ec-user_contacts-[[+fid]]\\" value=\\"[[+user_contacts]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_contacts-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-subject-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_subject]]<\\/label>\\n        <input type=\\"text\\" name=\\"subject\\" class=\\"form-control\\" id=\\"ec-subject-[[+fid]]\\" value=\\"[[+subject]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-subject-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-rating-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_rating]]<\\/label>\\n        <input type=\\"hidden\\" name=\\"rating\\" id=\\"ec-rating-[[+fid]]\\" value=\\"[[+rating]]\\" \\/>\\n        <div class=\\"ec-rating ec-clearfix\\" data-storage-id=\\"ec-rating-[[+fid]]\\">\\n            <div class=\\"ec-rating-stars\\">\\n                <span data-rating=\\"1\\" data-description=\\"[[%ec_fe_message_rating_1]]\\"><\\/span>\\n                <span data-rating=\\"2\\" data-description=\\"[[%ec_fe_message_rating_2]]\\"><\\/span>\\n                <span data-rating=\\"3\\" data-description=\\"[[%ec_fe_message_rating_3]]\\"><\\/span>\\n                <span data-rating=\\"4\\" data-description=\\"[[%ec_fe_message_rating_4]]\\"><\\/span>\\n                <span data-rating=\\"5\\" data-description=\\"[[%ec_fe_message_rating_5]]\\"><\\/span>\\n            <\\/div>\\n            <div class=\\"ec-rating-description\\">[[%ec_fe_message_rating_0]]<\\/div>\\n        <\\/div>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-rating-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-text-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_text]]<\\/label>\\n        <textarea type=\\"text\\" name=\\"text\\" class=\\"form-control\\" rows=\\"5\\" id=\\"ec-text-[[+fid]]\\">[[+text]]<\\/textarea>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-text-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-actions\\">\\n        <input type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"send\\" value=\\"[[%ec_fe_send]]\\" \\/>\\n    <\\/div>\\n<\\/form>\\n<div id=\\"ec-form-success-[[+fid]]\\"><\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_form.tpl","content":"<h2>[[%ec_fe_message_add]]<\\/h2>\\n<form class=\\"form well ec-form\\" method=\\"post\\" role=\\"form\\" id=\\"ec-form-[[+fid]]\\" data-fid=\\"[[+fid]]\\" action=\\"\\">\\n    <input type=\\"hidden\\" name=\\"thread\\" value=\\"[[+thread]]\\">\\n\\n    <div class=\\"form-group ec-antispam\\">\\n        <label for=\\"ec-[[+antispam_field]]-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_antismap]]<\\/label>\\n        <input type=\\"text\\" name=\\"[[+antispam_field]]\\" class=\\"form-control\\" id=\\"ec-[[+antispam_field]]-[[+fid]]\\" value=\\"\\" \\/>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_name-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_name]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_name\\" class=\\"form-control\\" id=\\"ec-user_name-[[+fid]]\\" value=\\"[[+user_name]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_name-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_email-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_email]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_email\\" class=\\"form-control\\" id=\\"ec-user_email-[[+fid]]\\" value=\\"[[+user_email]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_email-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-user_contacts-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_user_contacts]]<\\/label>\\n        <input type=\\"text\\" name=\\"user_contacts\\" class=\\"form-control\\" id=\\"ec-user_contacts-[[+fid]]\\" value=\\"[[+user_contacts]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-user_contacts-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-subject-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_subject]]<\\/label>\\n        <input type=\\"text\\" name=\\"subject\\" class=\\"form-control\\" id=\\"ec-subject-[[+fid]]\\" value=\\"[[+subject]]\\" \\/>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-subject-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-rating-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_rating]]<\\/label>\\n        <input type=\\"hidden\\" name=\\"rating\\" id=\\"ec-rating-[[+fid]]\\" value=\\"[[+rating]]\\" \\/>\\n        <div class=\\"ec-rating ec-clearfix\\" data-storage-id=\\"ec-rating-[[+fid]]\\">\\n            <div class=\\"ec-rating-stars\\">\\n                <span data-rating=\\"1\\" data-description=\\"[[%ec_fe_message_rating_1]]\\"><\\/span>\\n                <span data-rating=\\"2\\" data-description=\\"[[%ec_fe_message_rating_2]]\\"><\\/span>\\n                <span data-rating=\\"3\\" data-description=\\"[[%ec_fe_message_rating_3]]\\"><\\/span>\\n                <span data-rating=\\"4\\" data-description=\\"[[%ec_fe_message_rating_4]]\\"><\\/span>\\n                <span data-rating=\\"5\\" data-description=\\"[[%ec_fe_message_rating_5]]\\"><\\/span>\\n            <\\/div>\\n            <div class=\\"ec-rating-description\\">[[%ec_fe_message_rating_0]]<\\/div>\\n        <\\/div>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-rating-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-group\\">\\n        <label for=\\"ec-text-[[+fid]]\\" class=\\"control-label\\">[[%ec_fe_message_text]]<\\/label>\\n        <textarea type=\\"text\\" name=\\"text\\" class=\\"form-control\\" rows=\\"5\\" id=\\"ec-text-[[+fid]]\\">[[+text]]<\\/textarea>\\n        <span class=\\"ec-error help-block\\" id=\\"ec-text-error-[[+fid]]\\"><\\/span>\\n    <\\/div>\\n\\n    <div class=\\"form-actions\\">\\n        <input type=\\"submit\\" class=\\"btn btn-primary\\" name=\\"send\\" value=\\"[[%ec_fe_send]]\\" \\/>\\n    <\\/div>\\n<\\/form>\\n<div id=\\"ec-form-success-[[+fid]]\\"><\\/div>"}',
        'guid' => '0b3a7a7e3569ae60f6f6a55ab21ae0df',
        'native_key' => 0,
        'signature' => '56133a0e09ef25f00d377993fed21e6a',
      ),
      'cd2db9bac815af91821b2b9e23a7a7a4' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecForm.Success","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"alert alert-success\\" role=\\"alert\\">\\n    [[%ec_fe_send_success]]\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_form_success.tpl","content":"<div class=\\"alert alert-success\\" role=\\"alert\\">\\n    [[%ec_fe_send_success]]\\n<\\/div>"}',
        'guid' => '286d924ee5ef0ffa78ca251b5e500504',
        'native_key' => 0,
        'signature' => '4568043572d7f26ccfc5ea2fd99dc527',
      ),
      '738969a62e3f27aa8f75f70707bd7240' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecForm.New.Email.User","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435, [[+user_name]]!\\n<br \\/>\\n\\u0412\\u044b \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b\\u0438 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]]:\\n<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e \\u043f\\u043e\\u0441\\u043b\\u0435 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u043a\\u0438 \\u0430\\u0434\\u043c\\u0438\\u043d\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043e\\u0440\\u043e\\u043c.\\n<br \\/>\\n<br \\/>\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\\u043c, [[++site_name]].","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_form_new_email_user.tpl","content":"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435, [[+user_name]]!\\n<br \\/>\\n\\u0412\\u044b \\u043e\\u0441\\u0442\\u0430\\u0432\\u0438\\u043b\\u0438 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]]:\\n<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u0443\\u0434\\u0435\\u0442 \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e \\u043f\\u043e\\u0441\\u043b\\u0435 \\u043f\\u0440\\u043e\\u0432\\u0435\\u0440\\u043a\\u0438 \\u0430\\u0434\\u043c\\u0438\\u043d\\u0438\\u0441\\u0442\\u0440\\u0430\\u0442\\u043e\\u0440\\u043e\\u043c.\\n<br \\/>\\n<br \\/>\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\\u043c, [[++site_name]]."}',
        'guid' => 'e980966526eeea5679ab442404fd6d59',
        'native_key' => 0,
        'signature' => '9095643265a6a8759dd992b1e66905b6',
      ),
      'b0993d1a381c9deca78c11b9de837df1' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecForm.New.Email.Manager","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u041d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]] \\u0431\\u044b\\u043b\\u043e \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u0435\\u043d\\u043e \\u043d\\u043e\\u0432\\u043e\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435:\\n<br \\/>\\n<br \\/>\\n\\u0410\\u0432\\u0442\\u043e\\u0440: <span style=\\"font-weight: bold\\">[[+user_name]]<\\/span>\\n<br\\/>\\n\\u042d\\u043b\\u0435\\u043a\\u0442\\u0440\\u043e\\u043d\\u043d\\u0430\\u044f \\u043f\\u043e\\u0447\\u0442\\u0430: <span style=\\"font-weight: bold\\">[[+user_email]]<\\/span>\\n<br\\/>\\n\\u041a\\u043e\\u043d\\u0442\\u0430\\u043a\\u0442\\u043d\\u0430\\u044f \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u044f: <span style=\\"font-weight: bold\\">[[+user_contacts]]<\\/span>\\n<br\\/>\\n<br\\/>\\n\\u0422\\u0435\\u043c\\u0430 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f: <span style=\\"font-weight: bold\\">[[+subject]]<\\/span>\\n<br\\/>\\n\\u041e\\u0446\\u0435\\u043d\\u043a\\u0430: <span style=\\"font-weight: bold\\">[[+rating]]<\\/span>\\n<br\\/>\\n\\u0422\\u0435\\u043a\\u0441\\u0442 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f:\\n<br\\/>\\n<br\\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n\\u0421\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u044b\\u043b\\u043e \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u0435\\u043d\\u043e \\u043d\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0435 <a target=\\"_blank\\" href=\\"[[~[[+resource_id]]?scheme=`full`]]\\">[[+resource_pagetitle]]<\\/a>\\n<br \\/>\\n<br \\/>\\n<a target=\\"_blank\\" href=\\"[[++site_url]]manager\\/?a=resource\\/update&id=[[+resource_id]]\\">\\u041e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u0442\\u044c \\u0438\\u043b\\u0438 \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c \\u043d\\u0430 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 &gt;<\\/a>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_form_new_email_manager.tpl","content":"\\u041d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]] \\u0431\\u044b\\u043b\\u043e \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u0435\\u043d\\u043e \\u043d\\u043e\\u0432\\u043e\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435:\\n<br \\/>\\n<br \\/>\\n\\u0410\\u0432\\u0442\\u043e\\u0440: <span style=\\"font-weight: bold\\">[[+user_name]]<\\/span>\\n<br\\/>\\n\\u042d\\u043b\\u0435\\u043a\\u0442\\u0440\\u043e\\u043d\\u043d\\u0430\\u044f \\u043f\\u043e\\u0447\\u0442\\u0430: <span style=\\"font-weight: bold\\">[[+user_email]]<\\/span>\\n<br\\/>\\n\\u041a\\u043e\\u043d\\u0442\\u0430\\u043a\\u0442\\u043d\\u0430\\u044f \\u0438\\u043d\\u0444\\u043e\\u0440\\u043c\\u0430\\u0446\\u0438\\u044f: <span style=\\"font-weight: bold\\">[[+user_contacts]]<\\/span>\\n<br\\/>\\n<br\\/>\\n\\u0422\\u0435\\u043c\\u0430 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f: <span style=\\"font-weight: bold\\">[[+subject]]<\\/span>\\n<br\\/>\\n\\u041e\\u0446\\u0435\\u043d\\u043a\\u0430: <span style=\\"font-weight: bold\\">[[+rating]]<\\/span>\\n<br\\/>\\n\\u0422\\u0435\\u043a\\u0441\\u0442 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u044f:\\n<br\\/>\\n<br\\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n\\u0421\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u044b\\u043b\\u043e \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u0435\\u043d\\u043e \\u043d\\u0430 \\u0441\\u0442\\u0440\\u0430\\u043d\\u0438\\u0446\\u0435 <a target=\\"_blank\\" href=\\"[[~[[+resource_id]]?scheme=`full`]]\\">[[+resource_pagetitle]]<\\/a>\\n<br \\/>\\n<br \\/>\\n<a target=\\"_blank\\" href=\\"[[++site_url]]manager\\/?a=resource\\/update&id=[[+resource_id]]\\">\\u041e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u0442\\u044c \\u0438\\u043b\\u0438 \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u0442\\u044c \\u043d\\u0430 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 &gt;<\\/a>"}',
        'guid' => 'e4260e074fb5e96e8b20476326e64bff',
        'native_key' => 0,
        'signature' => '7eb2d22e1e7223d95bda1fcdf94df47a',
      ),
      '8a5c8d0fce7c126274627690ed68c827' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecForm.Update.Email.User","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435, [[+user_name]]!\\n<br \\/>\\n\\u0412\\u044b \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u044f\\u043b\\u0438 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]]:\\n<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n[[+no_reply_and_published]][[+reply_and_published]][[+reply_and_not_published]]\\n<br \\/>\\n<br \\/>\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\\u043c, [[++site_name]].\\n\\n<!--ec_no_reply_and_published\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u044b\\u043b\\u043e \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e. \\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0435\\u0433\\u043e \\u043f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c <a href=\\"[[~[[+resource_id]]? &scheme=`full`]]#message-[[+id]]\\">\\u0437\\u0434\\u0435\\u0441\\u044c<\\/a>.\\n-->\\n<!--ec_reply_and_published\\n[[+reply_author]]<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+reply_text]]<\\/div>\\n<br \\/>\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0441 \\u043e\\u0442\\u0432\\u0435\\u0442\\u043e\\u043c \\u043d\\u0430 \\u043d\\u0435\\u0433\\u043e \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e <a href=\\"[[~[[+resource_id]]? &scheme=`full`]]#message-[[+id]]\\">\\u0437\\u0434\\u0435\\u0441\\u044c<\\/a>.\\n-->\\n<!--ec_reply_and_not_published\\n[[+reply_author]]<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+reply_text]]<\\/div>\\n-->\\n\\n<!--ec_reply_author <span style=\\"font-weight:bold;\\">[[+reply_author]]<\\/span> \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u043b \\u043d\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435:-->\\n<!--ec_!reply_author \\u041d\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0434\\u0430\\u043d \\u043e\\u0442\\u0432\\u0435\\u0442:-->","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_form_update_email_user.tpl","content":"\\u0417\\u0434\\u0440\\u0430\\u0432\\u0441\\u0442\\u0432\\u0443\\u0439\\u0442\\u0435, [[+user_name]]!\\n<br \\/>\\n\\u0412\\u044b \\u043e\\u0441\\u0442\\u0430\\u0432\\u043b\\u044f\\u043b\\u0438 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u043d\\u0430 \\u0441\\u0430\\u0439\\u0442\\u0435 [[++site_url]]:\\n<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+text]]<\\/div>\\n<br \\/><br \\/>\\n[[+no_reply_and_published]][[+reply_and_published]][[+reply_and_not_published]]\\n<br \\/>\\n<br \\/>\\n\\u0421 \\u0443\\u0432\\u0430\\u0436\\u0435\\u043d\\u0438\\u0435\\u043c, [[++site_name]].\\n\\n<!--ec_no_reply_and_published\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0431\\u044b\\u043b\\u043e \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e. \\u0412\\u044b \\u043c\\u043e\\u0436\\u0435\\u0442\\u0435 \\u0435\\u0433\\u043e \\u043f\\u0440\\u043e\\u0441\\u043c\\u043e\\u0442\\u0440\\u0435\\u0442\\u044c <a href=\\"[[~[[+resource_id]]? &scheme=`full`]]#message-[[+id]]\\">\\u0437\\u0434\\u0435\\u0441\\u044c<\\/a>.\\n-->\\n<!--ec_reply_and_published\\n[[+reply_author]]<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+reply_text]]<\\/div>\\n<br \\/>\\n\\u0412\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0441 \\u043e\\u0442\\u0432\\u0435\\u0442\\u043e\\u043c \\u043d\\u0430 \\u043d\\u0435\\u0433\\u043e \\u043e\\u043f\\u0443\\u0431\\u043b\\u0438\\u043a\\u043e\\u0432\\u0430\\u043d\\u043e <a href=\\"[[~[[+resource_id]]? &scheme=`full`]]#message-[[+id]]\\">\\u0437\\u0434\\u0435\\u0441\\u044c<\\/a>.\\n-->\\n<!--ec_reply_and_not_published\\n[[+reply_author]]<br \\/>\\n<br \\/>\\n<div style=\\"white-space:pre;background: #f0f0f0;padding: 10px;border: solid 1px #eee;\\">[[+reply_text]]<\\/div>\\n-->\\n\\n<!--ec_reply_author <span style=\\"font-weight:bold;\\">[[+reply_author]]<\\/span> \\u043e\\u0442\\u0432\\u0435\\u0442\\u0438\\u043b \\u043d\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435:-->\\n<!--ec_!reply_author \\u041d\\u0430 \\u0432\\u0430\\u0448\\u0435 \\u0441\\u043e\\u043e\\u0431\\u0449\\u0435\\u043d\\u0438\\u0435 \\u0434\\u0430\\u043d \\u043e\\u0442\\u0432\\u0435\\u0442:-->"}',
        'guid' => '4d2d34d295e24914024553d642856fba',
        'native_key' => 0,
        'signature' => '6fb970aac8f7965d27ca4dc035f1289e',
      ),
      'ccb5726993cc913aa43683e8428fb7c4' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modChunk',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"tpl.ecThreadRating","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"<div class=\\"ec-stars\\" title=\\"[[+rating_wilson]]\\">\\r\\n    <span style=\\"width: [[+rating_wilson_percent]]%\\"><\\/span>\\r\\n<\\/div>","locked":0,"properties":null,"static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/chunks\\/chunk.ec_thread_rating.tpl","content":"<div class=\\"ec-stars\\" title=\\"[[+rating_wilson]]\\">\\r\\n    <span style=\\"width: [[+rating_wilson_percent]]%\\"><\\/span>\\r\\n<\\/div>"}',
        'guid' => '46422d6856bb4cf404d97b99ffa7d98f',
        'native_key' => 0,
        'signature' => 'e20273df6393e17d6dd84ce27adf26b5',
      ),
    ),
    'Snippets' => 
    array (
      '4bf7ef2336121541b4b7ab06519ca1bb' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ecMessages","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var easyComm $easyComm *\\/\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\n    return \'Could not load easyComm class!\';\\n}\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n$fastMode = !empty($fastMode);\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/* @var string $threads *\\/\\n$threads = $modx->getOption(\'threads\', $scriptProperties, \'\');\\nif($threads == \'*\') {\\n    $threads = array();\\n}\\nelse {\\n    if(empty($threads)) {\\n        $threads = $modx->getOption(\'thread\', $scriptProperties, \'\');\\n        if(empty($threads)) {\\n            $threads = \'resource-\'.$modx->resource->get(\'id\');\\n        }\\n    }\\n    $threads = explode(\\",\\", $threads);\\n    $threads = array_map(\'trim\', $threads);\\n}\\n\\n$class = \'ecMessage\';\\n$threadClass = \'ecThread\';\\n\\/\\/ Query conditions\\n$select = array(\\n    $class => $modx->getSelectColumns($class, $class),\\n    $threadClass => $modx->getSelectColumns($threadClass, \'Thread\', \'thread_\'),\\n);\\n$innerJoin = array($threadClass => array(\'alias\' => \'Thread\', \'on\' => \\"`$class`.`thread` = `Thread`.`id`\\"));\\n\\n$where = array();\\nif(count($threads) == 1) {\\n    $where[\'`Thread`.`name`\'] = $threads[0];\\n}\\nif(count($threads) > 1) {\\n    $where[\'`Thread`.`name`:IN\'] = $threads;\\n}\\n\\n\\nif(empty($showUnpublished)) {\\n    $where[$class.\'.published\'] = 1;\\n}\\n\\nif(empty($showDeleted)) {\\n    $where[$class.\'.deleted\'] = 0;\\n}\\n\\nif(!empty($subject)) {\\n    $where[$class.\'.subject\'] = $subject;\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\', \'innerJoin\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => $class,\\n    \\/\\/\'loadModels\' => \'easyComm\',\\n    \'disableConditions\' => true,\\n    \'where\' => $modx->toJSON($where),\\n    \'select\' => $modx->toJSON($select),\\n    \'innerJoin\' => $modx->toJSON($innerJoin),\\n    \\/\\/\'groupby\' => $class.\'.id\',\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'ec_\'\\n);\\n\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n\\n$messages = $pdoFetch->run();\\n\\n\\/* @var $tmpChunk modChunk *\\/\\n$tmpChunk = $modx->newObject(\'modChunk\', array(\'name\' => \\"tmp-\\".uniqid()));\\n$tmpChunk->setCacheable(false);\\n$gravatarDefault = $tmpChunk->process(null, $modx->getOption(\'ec_gravatar_default\'));\\n\\n$gravatarSize = $modx->getOption(\'ec_gravatar_size\', null, 50);\\n\\n$output = array();\\n$idx = 0;\\nforeach($messages as $row) {\\n    $row[\'idx\'] = $idx++;\\n    $row[\'text_raw\'] = $row[\'text\'];\\n    $row[\'text\'] = nl2br($row[\'text\']);\\n    $row[\'reply_text_raw\'] = $row[\'reply_text\'];\\n    $row[\'reply_text\'] = nl2br($row[\'reply_text\']);\\n\\n    $row[\'gravatar\'] = $gravatarDefault;\\n    if(!empty($row[\'user_email\'])) {\\n        $row[\'gravatar\'] = \'https:\\/\\/www.gravatar.com\\/avatar\\/\'.md5(strtolower($row[\'user_email\'])).\'?s=50\';\\n        if(!empty($gravatarDefault)) {\\n            $row[\'gravatar\'] .= \'&d=\'.urlencode($gravatarDefault);\\n        }\\n    }\\n\\n    $tpl = $pdoFetch->defineChunk($row);\\n    if (empty($tpl)) {\\n        $output[] = \'<pre>\'.$pdoFetch->getChunk(\'\', $row).\'<\\/pre>\';\\n    }\\n    else {\\n        $output[] = $pdoFetch->getChunk($tpl, $row, $fastMode);\\n    }\\n}\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"pdoResourcesLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n    if(empty($output) && !empty($tplEmpty)) {\\n        $output = $pdoFetch->getChunk($tplEmpty);\\n    }\\n    else {\\n        $output = implode($outputSeparator, $output);\\n    }\\n    $output .= $log;\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $data = array(\'output\' => $output);\\n        if( (count($threads) == 1) && ($threadObj = $modx->getObject(\'ecThread\', array(\'name\' => $threads[0]))) ) {\\n            $ratingMax = (float)$modx->getOption(\'ec_rating_max\', $scriptProperties, 5);\\n            $data = array_merge($data, $threadObj->toArray(),\\n                array(\\n                    \'rating_wilson_percent\' => number_format($threadObj->get(\'rating_wilson\') \\/ $ratingMax * 100, 3),\\n                    \'rating_simple_percent\' => number_format($threadObj->get(\'rating_simple\') \\/ $ratingMax * 100, 3),\\n                )\\n            );\\n        }\\n        $output = $pdoFetch->getChunk($tplWrapper, $data, $pdoFetch->config[\'fastMode\']);\\n    }\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    }\\n    else {\\n        return $output;\\n    }\\n}","locked":0,"properties":"a:15:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"threads\\";a:7:{s:4:\\"name\\";s:7:\\"threads\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_threads\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"subject\\";a:7:{s:4:\\"name\\";s:7:\\"subject\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_subject\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"easycomm_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.ecMessages.Row\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplWrapper\\";a:7:{s:4:\\"name\\";s:10:\\"tplWrapper\\";s:4:\\"desc\\";s:24:\\"easycomm_prop_tplWrapper\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:8:\\"tplEmpty\\";a:7:{s:4:\\"name\\";s:8:\\"tplEmpty\\";s:4:\\"desc\\";s:22:\\"easycomm_prop_tplEmpty\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"sortby\\";a:7:{s:4:\\"name\\";s:6:\\"sortby\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_sortby\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:4:\\"date\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"sortdir\\";a:7:{s:4:\\"name\\";s:7:\\"sortdir\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_sortdir\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:2:{i:0;a:2:{s:4:\\"text\\";s:3:\\"ASC\\";s:5:\\"value\\";s:3:\\"ASC\\";}i:1;a:2:{s:4:\\"text\\";s:4:\\"DESC\\";s:5:\\"value\\";s:4:\\"DESC\\";}}s:5:\\"value\\";s:4:\\"DESC\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:5:\\"limit\\";a:7:{s:4:\\"name\\";s:5:\\"limit\\";s:4:\\"desc\\";s:19:\\"easycomm_prop_limit\\";s:4:\\"type\\";s:11:\\"numberfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";i:10;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"easycomm_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"easycomm_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"outputSeparator\\";a:7:{s:4:\\"name\\";s:15:\\"outputSeparator\\";s:4:\\"desc\\";s:29:\\"easycomm_prop_outputSeparator\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:1:\\"\\n\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"easycomm_prop_toPlaceholder\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:22:\\"toSeparatePlaceholders\\";a:7:{s:4:\\"name\\";s:22:\\"toSeparatePlaceholders\\";s:4:\\"desc\\";s:36:\\"easycomm_prop_toSeparatePlaceholders\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"showLog\\";a:7:{s:4:\\"name\\";s:7:\\"showLog\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_showLog\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/snippets\\/snippet.ec_messages.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var easyComm $easyComm *\\/\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\n    return \'Could not load easyComm class!\';\\n}\\n\\n\\/* @var pdoFetch $pdoFetch *\\/\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n    return false;\\n}\\n$pdoFetch->addTime(\'pdoTools loaded\');\\n$fastMode = !empty($fastMode);\\n$outputSeparator = $modx->getOption(\'outputSeparator\', $scriptProperties, \\"\\\\n\\");\\n\\n\\/* @var string $threads *\\/\\n$threads = $modx->getOption(\'threads\', $scriptProperties, \'\');\\nif($threads == \'*\') {\\n    $threads = array();\\n}\\nelse {\\n    if(empty($threads)) {\\n        $threads = $modx->getOption(\'thread\', $scriptProperties, \'\');\\n        if(empty($threads)) {\\n            $threads = \'resource-\'.$modx->resource->get(\'id\');\\n        }\\n    }\\n    $threads = explode(\\",\\", $threads);\\n    $threads = array_map(\'trim\', $threads);\\n}\\n\\n$class = \'ecMessage\';\\n$threadClass = \'ecThread\';\\n\\/\\/ Query conditions\\n$select = array(\\n    $class => $modx->getSelectColumns($class, $class),\\n    $threadClass => $modx->getSelectColumns($threadClass, \'Thread\', \'thread_\'),\\n);\\n$innerJoin = array($threadClass => array(\'alias\' => \'Thread\', \'on\' => \\"`$class`.`thread` = `Thread`.`id`\\"));\\n\\n$where = array();\\nif(count($threads) == 1) {\\n    $where[\'`Thread`.`name`\'] = $threads[0];\\n}\\nif(count($threads) > 1) {\\n    $where[\'`Thread`.`name`:IN\'] = $threads;\\n}\\n\\n\\nif(empty($showUnpublished)) {\\n    $where[$class.\'.published\'] = 1;\\n}\\n\\nif(empty($showDeleted)) {\\n    $where[$class.\'.deleted\'] = 0;\\n}\\n\\nif(!empty($subject)) {\\n    $where[$class.\'.subject\'] = $subject;\\n}\\n\\n\\/\\/ Add custom parameters\\nforeach (array(\'where\',\'select\', \'innerJoin\') as $v) {\\n    if (!empty($scriptProperties[$v])) {\\n        $tmp = $modx->fromJSON($scriptProperties[$v]);\\n        if (is_array($tmp)) {\\n            $$v = array_merge($$v, $tmp);\\n        }\\n    }\\n    unset($scriptProperties[$v]);\\n}\\n$pdoFetch->addTime(\'Conditions prepared\');\\n\\n\\/\\/ Default parameters\\n$default = array(\\n    \'class\' => $class,\\n    \\/\\/\'loadModels\' => \'easyComm\',\\n    \'disableConditions\' => true,\\n    \'where\' => $modx->toJSON($where),\\n    \'select\' => $modx->toJSON($select),\\n    \'innerJoin\' => $modx->toJSON($innerJoin),\\n    \\/\\/\'groupby\' => $class.\'.id\',\\n    \'return\' => \'data\',\\n    \'nestedChunkPrefix\' => \'ec_\'\\n);\\n\\n\\n\\/\\/ Merge all properties and run!\\n$pdoFetch->addTime(\'Query parameters ready\');\\n$pdoFetch->setConfig(array_merge($default, $scriptProperties), false);\\n\\n\\n$messages = $pdoFetch->run();\\n\\n\\/* @var $tmpChunk modChunk *\\/\\n$tmpChunk = $modx->newObject(\'modChunk\', array(\'name\' => \\"tmp-\\".uniqid()));\\n$tmpChunk->setCacheable(false);\\n$gravatarDefault = $tmpChunk->process(null, $modx->getOption(\'ec_gravatar_default\'));\\n\\n$gravatarSize = $modx->getOption(\'ec_gravatar_size\', null, 50);\\n\\n$output = array();\\n$idx = 0;\\nforeach($messages as $row) {\\n    $row[\'idx\'] = $idx++;\\n    $row[\'text_raw\'] = $row[\'text\'];\\n    $row[\'text\'] = nl2br($row[\'text\']);\\n    $row[\'reply_text_raw\'] = $row[\'reply_text\'];\\n    $row[\'reply_text\'] = nl2br($row[\'reply_text\']);\\n\\n    $row[\'gravatar\'] = $gravatarDefault;\\n    if(!empty($row[\'user_email\'])) {\\n        $row[\'gravatar\'] = \'https:\\/\\/www.gravatar.com\\/avatar\\/\'.md5(strtolower($row[\'user_email\'])).\'?s=50\';\\n        if(!empty($gravatarDefault)) {\\n            $row[\'gravatar\'] .= \'&d=\'.urlencode($gravatarDefault);\\n        }\\n    }\\n\\n    $tpl = $pdoFetch->defineChunk($row);\\n    if (empty($tpl)) {\\n        $output[] = \'<pre>\'.$pdoFetch->getChunk(\'\', $row).\'<\\/pre>\';\\n    }\\n    else {\\n        $output[] = $pdoFetch->getChunk($tpl, $row, $fastMode);\\n    }\\n}\\n$log = \'\';\\nif ($modx->user->hasSessionContext(\'mgr\') && !empty($showLog)) {\\n    $log .= \'<pre class=\\"pdoResourcesLog\\">\' . print_r($pdoFetch->getTime(), 1) . \'<\\/pre>\';\\n}\\n\\n\\/\\/ Return output\\nif (!empty($toSeparatePlaceholders)) {\\n    $output[\'log\'] = $log;\\n    $modx->setPlaceholders($output, $toSeparatePlaceholders);\\n}\\nelse {\\n    if(empty($output) && !empty($tplEmpty)) {\\n        $output = $pdoFetch->getChunk($tplEmpty);\\n    }\\n    else {\\n        $output = implode($outputSeparator, $output);\\n    }\\n    $output .= $log;\\n    if (!empty($tplWrapper) && (!empty($wrapIfEmpty) || !empty($output))) {\\n        $data = array(\'output\' => $output);\\n        if( (count($threads) == 1) && ($threadObj = $modx->getObject(\'ecThread\', array(\'name\' => $threads[0]))) ) {\\n            $ratingMax = (float)$modx->getOption(\'ec_rating_max\', $scriptProperties, 5);\\n            $data = array_merge($data, $threadObj->toArray(),\\n                array(\\n                    \'rating_wilson_percent\' => number_format($threadObj->get(\'rating_wilson\') \\/ $ratingMax * 100, 3),\\n                    \'rating_simple_percent\' => number_format($threadObj->get(\'rating_simple\') \\/ $ratingMax * 100, 3),\\n                )\\n            );\\n        }\\n        $output = $pdoFetch->getChunk($tplWrapper, $data, $pdoFetch->config[\'fastMode\']);\\n    }\\n    if (!empty($toPlaceholder)) {\\n        $modx->setPlaceholder($toPlaceholder, $output);\\n    }\\n    else {\\n        return $output;\\n    }\\n}"}',
        'guid' => '07fa6d24163c056a8a61cee69b05671d',
        'native_key' => 0,
        'signature' => 'c541d9f9943c5e1012ca7ea5e859d114',
      ),
      'be5bb64a61cbf9ebb85280fa142fdea7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ecMessagesCount","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var easyComm $easyComm *\\/\\r\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\r\\n    return \'Could not load easyComm class!\';\\r\\n}\\r\\n\\r\\n\\/* @var string $threads *\\/\\r\\n$threads = $modx->getOption(\'threads\', $scriptProperties, \'\');\\r\\nif($threads == \'*\') {\\r\\n    $threads = array();\\r\\n}\\r\\nelse {\\r\\n    if(empty($threads)) {\\r\\n        \\/* @var string $thread *\\/\\r\\n        $threads = $modx->getOption(\'thread\', $scriptProperties, \'\');\\r\\n        if(empty($threads)) {\\r\\n            $threads = \'resource-\'.$modx->resource->get(\'id\');\\r\\n        }\\r\\n    }\\r\\n    $threads = explode(\\",\\", $threads);\\r\\n    $threads = array_map(\'trim\', $threads);\\r\\n}\\r\\n\\r\\n$class = \'ecMessage\';\\r\\n$threadClass = \'ecThread\';\\r\\n\\r\\n$q = $modx->newQuery($class);\\r\\n$q->innerJoin($threadClass, \'Thread\', \\"`$class`.`thread` = `Thread`.`id`\\");\\r\\n\\r\\nif(count($threads) == 1) {\\r\\n    $q->where(array(\\r\\n        \'`Thread`.`name`\' => $threads[0]\\r\\n    ));\\r\\n}\\r\\nif(count($threads) > 1) {\\r\\n    $q->where(array(\\r\\n        \'`Thread`.`name`:IN\' => $threads\\r\\n    ));\\r\\n}\\r\\nif(empty($showUnpublished)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.published\' => 1\\r\\n    ));\\r\\n}\\r\\nif(empty($showDeleted)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.deleted\' => 0\\r\\n    ));\\r\\n}\\r\\nif(!empty($subject)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.subject\' => $subject\\r\\n    ));\\r\\n}\\r\\n\\r\\nreturn $modx->getCount($class, $q);","locked":0,"properties":"a:5:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"threads\\";a:7:{s:4:\\"name\\";s:7:\\"threads\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_threads\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"subject\\";a:7:{s:4:\\"name\\";s:7:\\"subject\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_subject\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"showUnpublished\\";a:7:{s:4:\\"name\\";s:15:\\"showUnpublished\\";s:4:\\"desc\\";s:29:\\"easycomm_prop_showUnpublished\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"showDeleted\\";a:7:{s:4:\\"name\\";s:11:\\"showDeleted\\";s:4:\\"desc\\";s:25:\\"easycomm_prop_showDeleted\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/snippets\\/snippet.ec_messages_count.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var easyComm $easyComm *\\/\\r\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\r\\n    return \'Could not load easyComm class!\';\\r\\n}\\r\\n\\r\\n\\/* @var string $threads *\\/\\r\\n$threads = $modx->getOption(\'threads\', $scriptProperties, \'\');\\r\\nif($threads == \'*\') {\\r\\n    $threads = array();\\r\\n}\\r\\nelse {\\r\\n    if(empty($threads)) {\\r\\n        \\/* @var string $thread *\\/\\r\\n        $threads = $modx->getOption(\'thread\', $scriptProperties, \'\');\\r\\n        if(empty($threads)) {\\r\\n            $threads = \'resource-\'.$modx->resource->get(\'id\');\\r\\n        }\\r\\n    }\\r\\n    $threads = explode(\\",\\", $threads);\\r\\n    $threads = array_map(\'trim\', $threads);\\r\\n}\\r\\n\\r\\n$class = \'ecMessage\';\\r\\n$threadClass = \'ecThread\';\\r\\n\\r\\n$q = $modx->newQuery($class);\\r\\n$q->innerJoin($threadClass, \'Thread\', \\"`$class`.`thread` = `Thread`.`id`\\");\\r\\n\\r\\nif(count($threads) == 1) {\\r\\n    $q->where(array(\\r\\n        \'`Thread`.`name`\' => $threads[0]\\r\\n    ));\\r\\n}\\r\\nif(count($threads) > 1) {\\r\\n    $q->where(array(\\r\\n        \'`Thread`.`name`:IN\' => $threads\\r\\n    ));\\r\\n}\\r\\nif(empty($showUnpublished)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.published\' => 1\\r\\n    ));\\r\\n}\\r\\nif(empty($showDeleted)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.deleted\' => 0\\r\\n    ));\\r\\n}\\r\\nif(!empty($subject)) {\\r\\n    $q->where(array(\\r\\n        $class.\'.subject\' => $subject\\r\\n    ));\\r\\n}\\r\\n\\r\\nreturn $modx->getCount($class, $q);"}',
        'guid' => '81105d3ca0b4d36af386cbef1f50cafe',
        'native_key' => 0,
        'signature' => '2f99fc882c2286ce8908994b2fc8be49',
      ),
      '97ac28e2a8f1ac2f84ed54ba60e0c2da' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ecForm","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\n\\/** @var easyComm $easyComm *\\/\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\n    return \'Could not load easyComm class!\';\\n}\\n$easyComm->initialize($modx->context->key, $scriptProperties);\\n\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdotools\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n    $pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n    $pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoTools from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n    return false;\\n}\\n\\n$tplForm = $modx->getOption(\'tplForm\', $scriptProperties, \'tpl.ecForm\');\\n$threadName = $modx->getOption(\'thread\', $scriptProperties, \'\');\\nif(empty($threadName)) {\\n    $threadName = \'resource-\'.$modx->resource->get(\'id\');\\n    $scriptProperties[\'thread\'] = $threadName;\\n}\\n$formId = $modx->getOption(\'formId\', $scriptProperties, \'\');\\nif(empty($formId)) {\\n    $formId = $threadName;\\n    $scriptProperties[\'formId\'] = $formId;\\n}\\n\\n\\/\\/ Prepare ecThread\\n\\/** @var ecThread $thread *\\/\\nif (!$thread = $modx->getObject(\'ecThread\', array(\'name\' => $threadName))) {\\n    $thread = $modx->newObject(\'ecThread\');\\n    $thread->fromArray(array(\\n        \'resource\' => $modx->resource->id,\\n        \'name\' => $threadName,\\n        \'title\' => $modx->getOption(\'threadTitle\', $scriptProperties, \'\'),\\n    ));\\n}\\n$thread->set(\'properties\', $scriptProperties);\\n$thread->save();\\n\\n$data = array(\\n    \'fid\' => $formId,\\n    \'thread\' => $thread->get(\'name\'),\\n    \'antispam_field\' => $modx->getOption(\'antispamField\', $scriptProperties)\\n);\\n\\nif ($modx->user->hasSessionContext($modx->context->get(\'key\'))) {\\n    $profile = $modx->user->getOne(\'Profile\');\\n    $data[\'user_name\'] = $profile->get(\'fullname\');\\n    if(empty($data[\'user_name\'])) {\\n        $data[\'user_name\'] = $modx->user->get(\'username\');\\n    }\\n    $data[\'user_email\'] = $profile->get(\'email\');\\n}\\n\\nreturn $pdoTools->getChunk($tplForm, $data);","locked":0,"properties":"a:14:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:6:\\"formId\\";a:7:{s:4:\\"name\\";s:6:\\"formId\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_formId\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"allowedFields\\";a:7:{s:4:\\"name\\";s:13:\\"allowedFields\\";s:4:\\"desc\\";s:27:\\"easycomm_prop_allowedFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:54:\\"user_name,user_email,user_contacts,subject,rating,text\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:14:\\"requiredFields\\";a:7:{s:4:\\"name\\";s:14:\\"requiredFields\\";s:4:\\"desc\\";s:28:\\"easycomm_prop_requiredFields\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:14:\\"user_name,text\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"antispamField\\";a:7:{s:4:\\"name\\";s:13:\\"antispamField\\";s:4:\\"desc\\";s:27:\\"easycomm_prop_antispamField\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:7:\\"address\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:11:\\"autoPublish\\";a:7:{s:4:\\"name\\";s:11:\\"autoPublish\\";s:4:\\"desc\\";s:25:\\"easycomm_prop_autoPublish\\";s:4:\\"type\\";s:4:\\"list\\";s:7:\\"options\\";a:3:{i:0;a:2:{s:4:\\"text\\";s:2:\\"No\\";s:5:\\"value\\";s:0:\\"\\";}i:1;a:2:{s:4:\\"text\\";s:11:\\"Only logged\\";s:5:\\"value\\";s:10:\\"OnlyLogged\\";}i:2;a:2:{s:4:\\"text\\";s:3:\\"All\\";s:5:\\"value\\";s:3:\\"All\\";}}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:7:\\"tplForm\\";a:7:{s:4:\\"name\\";s:7:\\"tplForm\\";s:4:\\"desc\\";s:21:\\"easycomm_prop_tplForm\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:10:\\"tpl.ecForm\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:10:\\"tplSuccess\\";a:7:{s:4:\\"name\\";s:10:\\"tplSuccess\\";s:4:\\"desc\\";s:24:\\"easycomm_prop_tplSuccess\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.ecForm.Success\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:16:\\"newEmailSubjUser\\";a:7:{s:4:\\"name\\";s:16:\\"newEmailSubjUser\\";s:4:\\"desc\\";s:30:\\"easycomm_prop_newEmailSubjUser\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:15:\\"tplNewEmailUser\\";a:7:{s:4:\\"name\\";s:15:\\"tplNewEmailUser\\";s:4:\\"desc\\";s:29:\\"easycomm_prop_tplNewEmailUser\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:25:\\"tpl.ecForm.New.Email.User\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"newEmailSubjManager\\";a:7:{s:4:\\"name\\";s:19:\\"newEmailSubjManager\\";s:4:\\"desc\\";s:33:\\"easycomm_prop_newEmailSubjManager\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplNewEmailManager\\";a:7:{s:4:\\"name\\";s:18:\\"tplNewEmailManager\\";s:4:\\"desc\\";s:32:\\"easycomm_prop_tplNewEmailManager\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.ecForm.New.Email.Manager\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:19:\\"updateEmailSubjUser\\";a:7:{s:4:\\"name\\";s:19:\\"updateEmailSubjUser\\";s:4:\\"desc\\";s:33:\\"easycomm_prop_updateEmailSubjUser\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:18:\\"tplUpdateEmailUser\\";a:7:{s:4:\\"name\\";s:18:\\"tplUpdateEmailUser\\";s:4:\\"desc\\";s:32:\\"easycomm_prop_tplUpdateEmailUser\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:28:\\"tpl.ecForm.Update.Email.User\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/snippets\\/snippet.ec_form.php","content":"\\/** @var array $scriptProperties *\\/\\n\\/** @var easyComm $easyComm *\\/\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\n    return \'Could not load easyComm class!\';\\n}\\n$easyComm->initialize($modx->context->key, $scriptProperties);\\n\\n$fqn = $modx->getOption(\'pdoTools.class\', null, \'pdotools.pdotools\', true);\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\n    $pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\n    $pdoTools = new $pdoClass($modx, $scriptProperties);\\n}\\nelse {\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoTools from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\n    return false;\\n}\\n\\n$tplForm = $modx->getOption(\'tplForm\', $scriptProperties, \'tpl.ecForm\');\\n$threadName = $modx->getOption(\'thread\', $scriptProperties, \'\');\\nif(empty($threadName)) {\\n    $threadName = \'resource-\'.$modx->resource->get(\'id\');\\n    $scriptProperties[\'thread\'] = $threadName;\\n}\\n$formId = $modx->getOption(\'formId\', $scriptProperties, \'\');\\nif(empty($formId)) {\\n    $formId = $threadName;\\n    $scriptProperties[\'formId\'] = $formId;\\n}\\n\\n\\/\\/ Prepare ecThread\\n\\/** @var ecThread $thread *\\/\\nif (!$thread = $modx->getObject(\'ecThread\', array(\'name\' => $threadName))) {\\n    $thread = $modx->newObject(\'ecThread\');\\n    $thread->fromArray(array(\\n        \'resource\' => $modx->resource->id,\\n        \'name\' => $threadName,\\n        \'title\' => $modx->getOption(\'threadTitle\', $scriptProperties, \'\'),\\n    ));\\n}\\n$thread->set(\'properties\', $scriptProperties);\\n$thread->save();\\n\\n$data = array(\\n    \'fid\' => $formId,\\n    \'thread\' => $thread->get(\'name\'),\\n    \'antispam_field\' => $modx->getOption(\'antispamField\', $scriptProperties)\\n);\\n\\nif ($modx->user->hasSessionContext($modx->context->get(\'key\'))) {\\n    $profile = $modx->user->getOne(\'Profile\');\\n    $data[\'user_name\'] = $profile->get(\'fullname\');\\n    if(empty($data[\'user_name\'])) {\\n        $data[\'user_name\'] = $modx->user->get(\'username\');\\n    }\\n    $data[\'user_email\'] = $profile->get(\'email\');\\n}\\n\\nreturn $pdoTools->getChunk($tplForm, $data);"}',
        'guid' => '2ca9dbabd51aaa17fc99e260f7805855',
        'native_key' => 0,
        'signature' => 'bf35ab683d355aa198d0b31a077a5a3e',
      ),
      '4dfa3cfc19994026a2dbb8143afadad7' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modSnippet',
        'object' => '{"id":0,"source":1,"property_preprocess":0,"name":"ecThreadRating","description":"","editor_type":0,"category":0,"cache_type":0,"snippet":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var easyComm $easyComm *\\/\\r\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\r\\n    return \'Could not load easyComm class!\';\\r\\n}\\r\\n\\r\\n\\/* @var string $thread *\\/\\r\\n$thread = $modx->getOption(\'thread\', $scriptProperties, \'\');\\r\\nif(empty($thread)) {\\r\\n    $thread = \'resource-\'.$modx->resource->get(\'id\');\\r\\n}\\r\\n\\r\\n\\/* @var MODx $modx *\\/\\r\\n\\/* @var ecThread $thread *\\/\\r\\n$thread = $modx->getObject(\'ecThread\', array(\'name\' => $thread));\\r\\nif(empty($thread)) {\\r\\n    return;\\r\\n}\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n}\\r\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n}\\r\\nelse {\\r\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\r\\n    return false;\\r\\n}\\r\\n\\r\\n$fastMode = !empty($fastMode);\\r\\n\\r\\n$ratingMax = (float)$modx->getOption(\'ec_rating_max\', $scriptProperties, 5);\\r\\n$data = array_merge(\\r\\n    $thread->toArray(),\\r\\n    array(\\r\\n        \'rating_wilson_percent\' => number_format($thread->get(\'rating_wilson\') \\/ $ratingMax * 100, 3),\\r\\n        \'rating_simple_percent\' => number_format($thread->get(\'rating_simple\') \\/ $ratingMax * 100, 3),\\r\\n    )\\r\\n);\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, $data, $fastMode);\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n}\\r\\nelse {\\r\\n    return $output;\\r\\n}","locked":0,"properties":"a:3:{s:6:\\"thread\\";a:7:{s:4:\\"name\\";s:6:\\"thread\\";s:4:\\"desc\\";s:20:\\"easycomm_prop_thread\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:0:\\"\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:3:\\"tpl\\";a:7:{s:4:\\"name\\";s:3:\\"tpl\\";s:4:\\"desc\\";s:17:\\"easycomm_prop_tpl\\";s:4:\\"type\\";s:9:\\"textfield\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";s:18:\\"tpl.ecThreadRating\\";s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}s:13:\\"toPlaceholder\\";a:7:{s:4:\\"name\\";s:13:\\"toPlaceholder\\";s:4:\\"desc\\";s:27:\\"easycomm_prop_toPlaceholder\\";s:4:\\"type\\";s:13:\\"combo-boolean\\";s:7:\\"options\\";a:0:{}s:5:\\"value\\";b:0;s:7:\\"lexicon\\";s:19:\\"easycomm:properties\\";s:4:\\"area\\";s:0:\\"\\";}}","moduleguid":"","static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/snippets\\/snippet.ec_thread_rating.php","content":"\\/** @var array $scriptProperties *\\/\\r\\n\\/** @var easyComm $easyComm *\\/\\r\\nif (!$easyComm = $modx->getService(\'easyComm\', \'easyComm\', $modx->getOption(\'ec_core_path\', null, $modx->getOption(\'core_path\') . \'components\\/easycomm\\/\') . \'model\\/easycomm\\/\', $scriptProperties)) {\\r\\n    return \'Could not load easyComm class!\';\\r\\n}\\r\\n\\r\\n\\/* @var string $thread *\\/\\r\\n$thread = $modx->getOption(\'thread\', $scriptProperties, \'\');\\r\\nif(empty($thread)) {\\r\\n    $thread = \'resource-\'.$modx->resource->get(\'id\');\\r\\n}\\r\\n\\r\\n\\/* @var MODx $modx *\\/\\r\\n\\/* @var ecThread $thread *\\/\\r\\n$thread = $modx->getObject(\'ecThread\', array(\'name\' => $thread));\\r\\nif(empty($thread)) {\\r\\n    return;\\r\\n}\\r\\n\\r\\n\\/* @var pdoFetch $pdoFetch *\\/\\r\\n$fqn = $modx->getOption(\'pdoFetch.class\', null, \'pdotools.pdofetch\', true);\\r\\nif ($pdoClass = $modx->loadClass($fqn, \'\', false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n}\\r\\nelseif ($pdoClass = $modx->loadClass($fqn, MODX_CORE_PATH . \'components\\/pdotools\\/model\\/\', false, true)) {\\r\\n    $pdoFetch = new $pdoClass($modx, $scriptProperties);\\r\\n}\\r\\nelse {\\r\\n    $modx->log(modX::LOG_LEVEL_ERROR, \'Could not load pdoFetch from \\"MODX_CORE_PATH\\/components\\/pdotools\\/model\\/\\".\');\\r\\n    return false;\\r\\n}\\r\\n\\r\\n$fastMode = !empty($fastMode);\\r\\n\\r\\n$ratingMax = (float)$modx->getOption(\'ec_rating_max\', $scriptProperties, 5);\\r\\n$data = array_merge(\\r\\n    $thread->toArray(),\\r\\n    array(\\r\\n        \'rating_wilson_percent\' => number_format($thread->get(\'rating_wilson\') \\/ $ratingMax * 100, 3),\\r\\n        \'rating_simple_percent\' => number_format($thread->get(\'rating_simple\') \\/ $ratingMax * 100, 3),\\r\\n    )\\r\\n);\\r\\n\\r\\n$output = $pdoFetch->getChunk($tpl, $data, $fastMode);\\r\\n\\r\\nif (!empty($toPlaceholder)) {\\r\\n    $modx->setPlaceholder($toPlaceholder, $output);\\r\\n}\\r\\nelse {\\r\\n    return $output;\\r\\n}"}',
        'guid' => 'a08b8f76d74e6755aea1205cf4675c31',
        'native_key' => 0,
        'signature' => 'ed929115852ef3f72503c7100cf8e6a3',
      ),
    ),
    'Plugins' => 
    array (
      '1082c304aa1803c2b87f77927470229b' => 
      array (
        'preserve_keys' => false,
        'update_object' => true,
        'unique_key' => 'name',
        'class' => 'modPlugin',
        'object' => '{"id":null,"source":1,"property_preprocess":0,"name":"easyComm","description":"","editor_type":0,"category":0,"cache_type":0,"plugincode":"\\/** @var array $scriptProperties *\\/\\nswitch ($modx->event->name) {\\n    case \'OnDocFormRender\':\\n        \\/** @var modResource $resource *\\/\\n        if ($mode == \'new\') {\\n            return;\\n        }\\n\\n        $template = $resource->get(\'template\');\\n        $showTemplates = trim($modx->getOption(\'ec_show_templates\'));\\n        $showResources = trim($modx->getOption(\'ec_show_resources\'));\\n        $showTab = false;\\n        if($showTemplates == \'*\' || $showResources == \'*\') {\\n            $showTab = true;\\n        }\\n        else {\\n            $showTemplates = array_map(\'trim\', explode(\',\', $showTemplates));\\n            $showResources = array_map(\'trim\', explode(\',\', $showResources));\\n            if (in_array($template, $showTemplates) || in_array($resource->get(\'id\'), $showResources)) {\\n                $showTab = true;\\n            }\\n        }\\n\\n        if(!$showTab) {\\n            return;\\n        }\\n\\n        $modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');\\n        $modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\\n\\t\\t\\tExt.onReady(function() {\\n\\t\\t\\t\\tMODx.modx23 = \' . (int)$modx23 . \';\\n\\t\\t\\t});\\n\\t\\t<\\/script>\');\\n\\n\\n        \\/** @var easyComm $easyComm *\\/\\n        $easyComm = $modx->getService(\'easyComm\', \'easyComm\', MODX_CORE_PATH.\'components\\/easycomm\\/model\\/easycomm\\/\');\\n        $modx->controller->addLexiconTopic(\'easycomm:default\');\\n        $url = $easyComm->config[\'assetsUrl\'];\\n        $modx->controller->addJavascript($url . \'js\\/mgr\\/easycomm.js\');\\n\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/misc\\/utils.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/threads.grid.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/threads.windows.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/messages.grid.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/messages.windows.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/page.panel.js\');\\n\\n        $modx->controller->addCss($url . \'css\\/mgr\\/main.css\');\\n\\n        \\/\\/ TODO: \\u0440\\u0430\\u0437\\u043e\\u0431\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f, \\u043f\\u043e\\u0447\\u0435\\u043c\\u0443 \\u0431\\u0435\\u0437 \\u044d\\u0442\\u043e\\u0433\\u043e \\u043d\\u0435 \\u0440\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u0442 \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u043e\\u0432\\n        $modx->newObject(\'ecMessage\');\\n\\n        $pluginsJS = $easyComm->getPluginsJS();\\n        if(!empty($pluginsJS)){\\n            foreach($pluginsJS as $js) {\\n                $modx->controller->addJavascript($js);\\n            }\\n        }\\n\\n        $defaultReplyAuthor = \'\';\\n        if($modx->getOption(\'ec_auto_reply_author\')) {\\n            $defaultReplyAuthor = addslashes($modx->user->getOne(\'Profile\')->get(\'fullname\'));\\n        }\\n\\n        $ecConfig = \'\\n            easyComm.config.thread_fields = \' . json_encode($easyComm->getThreadFields()) . \';\\n            easyComm.config.thread_grid_fields = \' . json_encode($easyComm->getThreadGridFields()) . \';\\n            easyComm.config.thread_window_fields = \' . json_encode($easyComm->getThreadWindowFields()) . \';\\n            easyComm.config.message_fields = \' . json_encode($easyComm->getMessageFields()) . \';\\n            easyComm.config.message_grid_fields = \' . json_encode($easyComm->getMessageGridFields()) . \';\\n            easyComm.config.message_window_layout = \' . $easyComm->getMessageWindowLayout() . \';\\n            easyComm.config.default_reply_author = \\"\' . $defaultReplyAuthor . \'\\";\\n        \';\\n\\n        if ($modx->getCount(\'modPlugin\', array(\'name\' => \'AjaxManager\', \'disabled\' => false))) {\\n            $modx->controller->addHtml(\'\\n\\t\\t\\t<script type=\\"text\\/javascript\\">\\n\\t\\t\\t\\teasyComm.config = \' . $modx->toJSON($easyComm->config) . \';\\n\\t\\t\\t\\teasyComm.config.connector_url = \\"\' . $easyComm->config[\'connectorUrl\'] . \'\\";\\n\\t\\t\\t\\t\'.$ecConfig.\'\\n\\t\\t\\t\\tExt.onReady(function() {\\n\\t\\t\\t\\t\\twindow.setTimeout(function() {\\n\\t\\t\\t\\t\\t\\tvar tabs = Ext.getCmp(\\"modx-resource-tabs\\");\\n\\t\\t\\t\\t\\t\\tif (tabs) {\\n\\t\\t\\t\\t\\t\\t\\ttabs.add({\\n\\t\\t\\t\\t\\t\\t\\t\\txtype: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tid: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle: _(\\"ec\\"),\\n\\t\\t\\t\\t\\t\\t\\t\\trecord: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tid: \' . $resource->get(\'id\') . \'\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}, 10);\\n\\t\\t\\t\\t});\\n\\t\\t\\t<\\/script>\');\\n        }\\n        else {\\n            $modx->controller->addHtml(\'\\n\\t\\t\\t<script type=\\"text\\/javascript\\">\\n\\t\\t\\t\\teasyComm.config = \' . $modx->toJSON($easyComm->config) . \';\\n\\t\\t\\t\\teasyComm.config.connector_url = \\"\' . $easyComm->config[\'connectorUrl\'] . \'\\";\\n\\t\\t\\t\\t\'.$ecConfig.\'\\n\\t\\t\\t\\tExt.ComponentMgr.onAvailable(\\"modx-resource-tabs\\", function() {\\n\\t\\t\\t\\t\\tthis.on(\\"beforerender\\", function() {\\n\\t\\t\\t\\t\\t\\tthis.add({\\n\\t\\t\\t\\t\\t\\t\\txtype: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\tid: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\ttitle: _(\\"ec\\"),\\n\\t\\t\\t\\t\\t\\t\\trecord: {\\n\\t\\t\\t\\t\\t\\t\\t\\tid: \' . $resource->get(\'id\') . \'\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tExt.apply(this, {\\n\\t\\t\\t\\t\\t\\t\\tstateful: true,\\n\\t\\t\\t\\t\\t\\t\\tstateId: \\"modx-resource-tabs-state\\",\\n\\t\\t\\t\\t\\t\\t\\tstateEvents: [\\"tabchange\\"],\\n\\t\\t\\t\\t\\t\\t\\tgetState: function() {return {activeTab:this.items.indexOf(this.getActiveTab())};\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t<\\/script>\');\\n        }\\n\\n        break;\\n}","locked":0,"properties":null,"disabled":0,"moduleguid":"","static":0,"static_file":"core\\/components\\/easycomm\\/elements\\/plugins\\/plugin.easycomm.php","content":"\\/** @var array $scriptProperties *\\/\\nswitch ($modx->event->name) {\\n    case \'OnDocFormRender\':\\n        \\/** @var modResource $resource *\\/\\n        if ($mode == \'new\') {\\n            return;\\n        }\\n\\n        $template = $resource->get(\'template\');\\n        $showTemplates = trim($modx->getOption(\'ec_show_templates\'));\\n        $showResources = trim($modx->getOption(\'ec_show_resources\'));\\n        $showTab = false;\\n        if($showTemplates == \'*\' || $showResources == \'*\') {\\n            $showTab = true;\\n        }\\n        else {\\n            $showTemplates = array_map(\'trim\', explode(\',\', $showTemplates));\\n            $showResources = array_map(\'trim\', explode(\',\', $showResources));\\n            if (in_array($template, $showTemplates) || in_array($resource->get(\'id\'), $showResources)) {\\n                $showTab = true;\\n            }\\n        }\\n\\n        if(!$showTab) {\\n            return;\\n        }\\n\\n        $modx23 = !empty($modx->version) && version_compare($modx->version[\'full_version\'], \'2.3.0\', \'>=\');\\n        $modx->controller->addHtml(\'<script type=\\"text\\/javascript\\">\\n\\t\\t\\tExt.onReady(function() {\\n\\t\\t\\t\\tMODx.modx23 = \' . (int)$modx23 . \';\\n\\t\\t\\t});\\n\\t\\t<\\/script>\');\\n\\n\\n        \\/** @var easyComm $easyComm *\\/\\n        $easyComm = $modx->getService(\'easyComm\', \'easyComm\', MODX_CORE_PATH.\'components\\/easycomm\\/model\\/easycomm\\/\');\\n        $modx->controller->addLexiconTopic(\'easycomm:default\');\\n        $url = $easyComm->config[\'assetsUrl\'];\\n        $modx->controller->addJavascript($url . \'js\\/mgr\\/easycomm.js\');\\n\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/misc\\/utils.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/threads.grid.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/threads.windows.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/messages.grid.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/messages.windows.js\');\\n        $modx->controller->addLastJavascript($url . \'js\\/mgr\\/widgets\\/page.panel.js\');\\n\\n        $modx->controller->addCss($url . \'css\\/mgr\\/main.css\');\\n\\n        \\/\\/ TODO: \\u0440\\u0430\\u0437\\u043e\\u0431\\u0440\\u0430\\u0442\\u044c\\u0441\\u044f, \\u043f\\u043e\\u0447\\u0435\\u043c\\u0443 \\u0431\\u0435\\u0437 \\u044d\\u0442\\u043e\\u0433\\u043e \\u043d\\u0435 \\u0440\\u0430\\u0431\\u043e\\u0442\\u0430\\u0435\\u0442 \\u043f\\u043e\\u0434\\u043a\\u043b\\u044e\\u0447\\u0435\\u043d\\u0438\\u0435 \\u043f\\u043b\\u0430\\u0433\\u0438\\u043d\\u043e\\u0432\\n        $modx->newObject(\'ecMessage\');\\n\\n        $pluginsJS = $easyComm->getPluginsJS();\\n        if(!empty($pluginsJS)){\\n            foreach($pluginsJS as $js) {\\n                $modx->controller->addJavascript($js);\\n            }\\n        }\\n\\n        $defaultReplyAuthor = \'\';\\n        if($modx->getOption(\'ec_auto_reply_author\')) {\\n            $defaultReplyAuthor = addslashes($modx->user->getOne(\'Profile\')->get(\'fullname\'));\\n        }\\n\\n        $ecConfig = \'\\n            easyComm.config.thread_fields = \' . json_encode($easyComm->getThreadFields()) . \';\\n            easyComm.config.thread_grid_fields = \' . json_encode($easyComm->getThreadGridFields()) . \';\\n            easyComm.config.thread_window_fields = \' . json_encode($easyComm->getThreadWindowFields()) . \';\\n            easyComm.config.message_fields = \' . json_encode($easyComm->getMessageFields()) . \';\\n            easyComm.config.message_grid_fields = \' . json_encode($easyComm->getMessageGridFields()) . \';\\n            easyComm.config.message_window_layout = \' . $easyComm->getMessageWindowLayout() . \';\\n            easyComm.config.default_reply_author = \\"\' . $defaultReplyAuthor . \'\\";\\n        \';\\n\\n        if ($modx->getCount(\'modPlugin\', array(\'name\' => \'AjaxManager\', \'disabled\' => false))) {\\n            $modx->controller->addHtml(\'\\n\\t\\t\\t<script type=\\"text\\/javascript\\">\\n\\t\\t\\t\\teasyComm.config = \' . $modx->toJSON($easyComm->config) . \';\\n\\t\\t\\t\\teasyComm.config.connector_url = \\"\' . $easyComm->config[\'connectorUrl\'] . \'\\";\\n\\t\\t\\t\\t\'.$ecConfig.\'\\n\\t\\t\\t\\tExt.onReady(function() {\\n\\t\\t\\t\\t\\twindow.setTimeout(function() {\\n\\t\\t\\t\\t\\t\\tvar tabs = Ext.getCmp(\\"modx-resource-tabs\\");\\n\\t\\t\\t\\t\\t\\tif (tabs) {\\n\\t\\t\\t\\t\\t\\t\\ttabs.add({\\n\\t\\t\\t\\t\\t\\t\\t\\txtype: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\t\\tid: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\t\\ttitle: _(\\"ec\\"),\\n\\t\\t\\t\\t\\t\\t\\t\\trecord: {\\n\\t\\t\\t\\t\\t\\t\\t\\t\\tid: \' . $resource->get(\'id\') . \'\\n\\t\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t}, 10);\\n\\t\\t\\t\\t});\\n\\t\\t\\t<\\/script>\');\\n        }\\n        else {\\n            $modx->controller->addHtml(\'\\n\\t\\t\\t<script type=\\"text\\/javascript\\">\\n\\t\\t\\t\\teasyComm.config = \' . $modx->toJSON($easyComm->config) . \';\\n\\t\\t\\t\\teasyComm.config.connector_url = \\"\' . $easyComm->config[\'connectorUrl\'] . \'\\";\\n\\t\\t\\t\\t\'.$ecConfig.\'\\n\\t\\t\\t\\tExt.ComponentMgr.onAvailable(\\"modx-resource-tabs\\", function() {\\n\\t\\t\\t\\t\\tthis.on(\\"beforerender\\", function() {\\n\\t\\t\\t\\t\\t\\tthis.add({\\n\\t\\t\\t\\t\\t\\t\\txtype: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\tid: \\"ec-panel-page\\",\\n\\t\\t\\t\\t\\t\\t\\ttitle: _(\\"ec\\"),\\n\\t\\t\\t\\t\\t\\t\\trecord: {\\n\\t\\t\\t\\t\\t\\t\\t\\tid: \' . $resource->get(\'id\') . \'\\n\\t\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t\\tExt.apply(this, {\\n\\t\\t\\t\\t\\t\\t\\tstateful: true,\\n\\t\\t\\t\\t\\t\\t\\tstateId: \\"modx-resource-tabs-state\\",\\n\\t\\t\\t\\t\\t\\t\\tstateEvents: [\\"tabchange\\"],\\n\\t\\t\\t\\t\\t\\t\\tgetState: function() {return {activeTab:this.items.indexOf(this.getActiveTab())};\\n\\t\\t\\t\\t\\t\\t}\\n\\t\\t\\t\\t\\t});\\n\\t\\t\\t\\t});\\n\\t\\t\\t<\\/script>\');\\n        }\\n\\n        break;\\n}"}',
        'guid' => '34a5385a318492d9c69ae94ddeb73f5b',
        'native_key' => NULL,
        'signature' => 'f08e753ec8f8538a3732b6cb53d5ec2d',
        'related_objects' => 
        array (
          'PluginEvents' => 
          array (
            '48c75b49b4991bc8b324ec07d883cb47' => 
            array (
              'preserve_keys' => true,
              'update_object' => true,
              'unique_key' => 
              array (
                0 => 'pluginid',
                1 => 'event',
              ),
              'class' => 'modPluginEvent',
              'object' => '{"pluginid":0,"event":"OnDocFormRender","priority":0,"propertyset":0}',
              'guid' => 'c27436c7da887a38abbd097e85c35013',
              'native_key' => 
              array (
                0 => 0,
                1 => 'OnDocFormRender',
              ),
              'signature' => '5d7529947e909bd26a9f4c8c36a87b75',
            ),
          ),
        ),
      ),
    ),
  ),
  'related_object_attributes' => 
  array (
    'Snippets' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Chunks' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'Plugins' => 
    array (
      'preserve_keys' => false,
      'update_object' => true,
      'unique_key' => 'name',
    ),
    'PluginEvents' => 
    array (
      'preserve_keys' => true,
      'update_object' => true,
      'unique_key' => 
      array (
        0 => 'pluginid',
        1 => 'event',
      ),
    ),
  ),
  'namespace' => 'easycomm',
  'resolve' => 
  array (
    0 => 
    array (
      'type' => 'file',
      'body' => '{"source":"easycomm-1.2.6-pl\\/modCategory\\/775d1e9562a0ae60cbec841b2f4016b3\\/0\\/","target":"return MODX_ASSETS_PATH . \'components\\/\';","name":"easycomm"}',
    ),
    1 => 
    array (
      'type' => 'file',
      'body' => '{"source":"easycomm-1.2.6-pl\\/modCategory\\/775d1e9562a0ae60cbec841b2f4016b3\\/1\\/","target":"return MODX_CORE_PATH . \'components\\/\';","name":"easycomm"}',
    ),
    2 => 
    array (
      'type' => 'php',
      'body' => '{"source":"easycomm-1.2.6-pl\\/modCategory\\/775d1e9562a0ae60cbec841b2f4016b3.resolve.tables.resolver","type":"php","name":"resolve.tables"}',
    ),
    3 => 
    array (
      'type' => 'php',
      'body' => '{"source":"easycomm-1.2.6-pl\\/modCategory\\/775d1e9562a0ae60cbec841b2f4016b3.resolve.chunks.resolver","type":"php","name":"resolve.chunks"}',
    ),
  ),
  'validate' => NULL,
  'vehicle_package' => 'transport',
  'vehicle_class' => 'xPDOObjectVehicle',
  'guid' => 'c35a79c85d5667fd4a613a499c7f6303',
  'package' => 'modx',
  'class' => 'modCategory',
  'signature' => '775d1e9562a0ae60cbec841b2f4016b3',
  'native_key' => NULL,
  'object' => '{"id":null,"parent":0,"category":"easyComm"}',
);